<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ—¥æœ¬æ»‘é›ªè¡Œ (2026)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f3f4f6; /* Gray 100 */
            color: #1f2937; /* Gray 800 */
            -webkit-tap-highlight-color: transparent;
            padding-bottom: 100px;
            scroll-behavior: smooth;
        }

        /* éš±è—æ²è»¸ä½†ä¿ç•™åŠŸèƒ½ */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        /* é ‚éƒ¨å›ºå®šå°èˆª */
        .sticky-header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
        }

        /* å¡ç‰‡è¨­è¨ˆ */
        .card {
            background: #ffffff;
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 50px; /* å¢åŠ é–“è·ï¼Œæ›´å°ˆæ³¨ */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.03), 0 4px 6px -2px rgba(0, 0, 0, 0.02);
            border: 1px solid #f3f4f6;
            transition: all 0.3s ease;
            position: relative;
        }

        /* ç•¶å‰é€²åº¦é«˜äº®æ¨£å¼ */
        .card.active-highlight {
            border: 2px solid #3b82f6;
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.2);
            transform: scale(1.02);
            z-index: 10;
        }
        
        .current-badge {
            display: none;
            position: absolute;
            top: -12px;
            right: 20px;
            background: #3b82f6;
            color: white;
            padding: 4px 12px;
            border-radius: 99px;
            font-size: 0.8rem;
            font-weight: bold;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            animation: bounce 2s infinite;
        }
        .card.active-highlight .current-badge { display: block; }

        /* æ™‚é–“è»¸æ¨£å¼ */
        .timeline-container {
            position: relative;
            padding-left: 28px;
            border-left: 3px solid #e5e7eb;
            margin-left: 12px;
        }
        .timeline-item { position: relative; }
        .timeline-dot {
            position: absolute;
            left: -37px;
            top: 6px;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #fff;
            border: 4px solid #3b82f6; /* Blue 500 */
            z-index: 10;
        }

        /* æŒ‰éˆ•èˆ‡é€£çµ */
        .nav-item {
            white-space: nowrap;
            padding: 14px 20px;
            font-size: 1rem;
            font-weight: 600;
            color: #6b7280;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.2s;
        }
        .nav-item.active {
            color: #2563eb;
            border-bottom-color: #2563eb;
        }

        .map-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            background-color: #dcfce7; /* Green 100 */
            color: #166534; /* Green 800 */
            padding: 12px;
            border-radius: 12px;
            font-weight: 700;
            text-decoration: none;
            margin-top: 12px;
            border: 1px solid #bbf7d0;
            transition: background 0.2s;
        }
        .map-btn:hover { background-color: #bbf7d0; }

        .route-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            background-color: #eff6ff; /* Blue 50 */
            color: #1e40af; /* Blue 800 */
            padding: 10px;
            border-radius: 12px;
            font-weight: 600;
            margin-top: 12px;
            border: 1px dashed #bfdbfe;
            cursor: pointer;
            width: 100%;
        }

        .time-pill {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: #f1f5f9;
            padding: 6px 12px;
            border-radius: 99px;
            font-family: monospace;
            font-size: 1.1rem;
            font-weight: 700;
            color: #334155;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid transparent;
        }
        .time-pill:active { transform: scale(0.95); background: #e2e8f0; }
        .time-pill:hover::after {
            content: '\f0c1'; /* FontAwesome Link Icon */
            font-family: "Font Awesome 6 Free";
            font-weight: 900;
            margin-left: 5px;
            font-size: 0.8rem;
            color: #94a3b8;
        }

        /* Checkbox */
        .custom-checkbox {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.2s;
        }
        .custom-checkbox:hover { background: #f8fafc; }
        .custom-checkbox input {
            margin-top: 5px;
            accent-color: #2563eb;
            width: 20px;
            height: 20px;
        }
        .checked-text {
            text-decoration: line-through;
            color: #9ca3af;
        }

        /* Modal & Lightbox */
        .modal-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6);
            backdrop-filter: blur(4px);
            z-index: 100;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        .modal-content {
            background: white;
            border-radius: 16px;
            width: 100%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            padding: 24px;
            animation: zoomIn 0.3s;
        }

        .lightbox {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95);
            z-index: 200;
            display: none;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }
        .lightbox img {
            max-width: 95%;
            max-height: 85%;
            border-radius: 4px;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
            object-fit: contain;
        }

        /* Utils */
        img.content-img {
            border-radius: 12px;
            border: 1px solid #e5e7eb;
            margin: 10px 0;
            cursor: zoom-in;
            width: 100%;
            height: auto;
            object-fit: cover;
        }
        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: #1f2937;
            color: white;
            padding: 12px 24px;
            border-radius: 99px;
            z-index: 300;
            display: none;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            font-size: 0.9rem;
        }

        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }
        @keyframes zoomIn { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }
    </style>
</head>
<body>

    <header class="fixed top-0 left-0 w-full z-40 sticky-header">
        <div class="px-4 py-3 flex justify-between items-center border-b border-gray-200">
            <h1 class="text-xl font-bold text-slate-800"><i class="fa-solid fa-person-skiing text-blue-600 mr-2"></i>æ—¥æœ¬æ»‘é›ªè¡Œ</h1>
            <button onclick="resetChecks()" class="text-xs text-gray-500 border border-gray-300 px-3 py-1 rounded-full hover:bg-gray-100">é‡ç½®å‹¾é¸</button>
        </div>
        
        <nav class="flex overflow-x-auto no-scrollbar" id="tabContainer">
            <div class="nav-item" data-tab="prep">è¡Œå‰/å‚™å¿˜</div>
            <div class="nav-item" data-tab="feb1-meeting">2/1 é›†åˆ</div>
            <div class="nav-item" data-tab="feb2">2/2 å‡ºç™¼/æ»‘é›ª</div>
            <div class="nav-item" data-tab="feb3">2/3 çŸ³æ‰“ä¸¸å±±</div>
            <div class="nav-item" data-tab="feb4">2/4 ç¥ç«‹</div>
            <div class="nav-item" data-tab="feb5">2/5 æœ€çµ‚æ—¥</div>
            <div class="nav-item" data-tab="feb6">2/6 ç§»å‹•æ—¥</div>
            <div class="nav-item" data-tab="feb7">2/7 èŠ±ç«</div>
            <div class="nav-item" data-tab="feb8">2/8 è¿”ç¨‹</div>
        </nav>
    </header>

    <div style="height: 120px;"></div>

    <main class="px-4">

        <section id="prep" class="tab-content hidden">
            <div class="card">
                <h2 class="text-xl font-bold mb-4 flex items-center gap-2"><i class="fa-solid fa-clipboard-check text-blue-500"></i> è¡Œå‰æº–å‚™</h2>
                <div class="checklist-group flex flex-col gap-1">
                    <label class="custom-checkbox"><input type="checkbox"><span>å»ºè­°å¯ä»¥æŠŠæ»‘é›ªæ’æ±—è¡«æˆ–å…§æ­ï¼Œç›´æ¥ç©¿åœ¨è£¡é¢</span></label>
                    <label class="custom-checkbox"><input type="checkbox"><span>æŠµé”æ©Ÿå ´ä¸è¦ç·šä¸Šå ±åˆ°(ä¾†ç”¨å¯¦é«”æ©Ÿç¥¨æ‰“å¡)</span></label>
                    <label class="custom-checkbox"><input type="checkbox"><span>è³¼è²·æ—…å¹³éšªã€æ„å¤–éšª <span class="text-red-600 font-bold bg-red-100 px-1 rounded">!!!æ»‘é›ªéœ€å¦å¤–æŠ•ä¿ç‰¹å®šæ´»å‹•éšª!!!!</span></span></label>
                    <label class="custom-checkbox"><input type="checkbox"><span>æ›å¥½è¶³å¤ æ—¥å¹£ç¾é‡‘</span></label>
                    <label class="custom-checkbox"><input type="checkbox"><span>è­·ç…§ã€è­‰ä»¶ã€eSIM(SIMå¡)è¨˜å¾—å¸¶å¥½</span></label>
                    <label class="custom-checkbox"><input type="checkbox"><span>æå‰å„²å€¼è¥¿ç“œå¡</span></label>
                    <label class="custom-checkbox"><input type="checkbox"><span>å¡«å¯« Visit Japan Web</span></label>
                    <a href="https://www.vjw.digital.go.jp" target="_blank" class="ml-10 text-blue-600 underline text-sm mb-2 block">å‰å¾€ Visit Japan Web</a>
                    <label class="custom-checkbox"><input type="checkbox"><span>æ±äº¬è»Šç«™ä¼´æ‰‹ç¦®å…ˆåˆ¶å®šå¥½è‡ªå·±çš„è³¼ç‰©æ¸…å–®</span></label>
                </div>
            </div>

            <div class="card">
                <h2 class="text-xl font-bold mb-4 flex items-center gap-2"><i class="fa-solid fa-bell text-yellow-500"></i> å‚™å¿˜æé†’</h2>
                
                <h3 class="font-bold text-gray-400 mt-4 border-b pb-2">2/1 (æ—¥)</h3>
                <label class="custom-checkbox"><input type="checkbox"><span>é ç´„éš”å¤©é›ªå ´æ¥é€ <br><small class="text-gray-500">2/2(ä¸€) å²©åŸé›ªå ´ï¼Œå»9:30 å›17:00</small></span></label>
                <label class="custom-checkbox"><input type="checkbox"><span>è³¼è²·éš”å¤©çŸ³æ‰“ä¸¸å±±é›ªç¥¨</span></label>

                <h3 class="font-bold text-gray-400 mt-6 border-b pb-2">2/2 (ä¸€)</h3>
                <label class="custom-checkbox"><input type="checkbox"><span>é ç´„éš”å¤©é›ªå ´æ¥é€ <br><small class="text-gray-500">2/3(äºŒ) çŸ³æ‰“ä¸¸å±± ä¸­å¤®å£ï¼Œå»8:30 å›17:00</small></span></label>

                <h3 class="font-bold text-gray-400 mt-6 border-b pb-2">2/3 (äºŒ)</h3>
                <label class="custom-checkbox"><input type="checkbox"><span>é ç´„éš”å¤©é›ªå ´æ¥é€ <br><small class="text-gray-500">2/4(ä¸‰) ç¥ç«‹æ»‘é›ªå ´ï¼Œå»7:45 å›17:00</small></span></label>
                <label class="custom-checkbox"><input type="checkbox"><span>è³¼è²·éš”å¤©çŸ³æ‰“ä¸¸å±±é›ªç¥¨</span></label>

                <h3 class="font-bold text-gray-400 mt-6 border-b pb-2">2/4 (ä¸‰)</h3>
                <label class="custom-checkbox"><input type="checkbox"><span>é ç´„éš”å¤©é›ªå ´æ¥é€ <br><small class="text-gray-500">2/5(å››) çŸ³æ‰“ä¸¸å±± ä¸­å¤®å£ï¼Œå»8:30 å›17:00</small></span></label>
            </div>
        </section>

        <section id="feb1-meeting" class="tab-content hidden">
            <div class="card border-l-8 border-l-indigo-600" id="t-0201-2130">
                <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                <div class="flex flex-col items-center py-8">
                    <div class="time-pill" onclick="setAnchor('t-0201-2130')">2/1(æ—¥) 21:30</div>
                    <h2 class="text-2xl font-bold mt-2">æ¡ƒåœ’æ©Ÿå ´è¦‹</h2>
                    <p class="text-gray-500 mt-2">è«‹å„ä½è‡ªè¡Œå®‰æ’å‰å¾€</p>
                    <div class="mt-6 bg-blue-50 text-blue-800 px-4 py-2 rounded-lg text-sm">
                        ğŸ‘‹ å‡ºç™¼å‰æœ€å¾Œç¢ºèªè­·ç…§èˆ‡æ‰‹æ©Ÿ
                    </div>
                </div>
            </div>
        </section>

        <section id="feb2" class="tab-content hidden">
            <div class="bg-gradient-to-r from-blue-600 to-indigo-700 p-6 rounded-2xl mb-8 shadow-lg text-white">
                <h2 class="text-2xl font-bold">ğŸ“… 2/2 (ä¸€) ç´…çœ¼ç‰¹æ”»</h2>
                <p class="opacity-90">ç›´è¡è¶Šå¾Œæ¹¯æ¾¤æ»‘é›ªå»</p>
                
                <div class="mt-4 bg-white/10 p-4 rounded-xl backdrop-blur-sm">
                    <div class="flex justify-between items-center">
                        <div class="text-center">
                            <div class="text-2xl font-bold">00:10</div>
                            <div class="text-xs opacity-75">TPE æ¡ƒåœ’</div>
                        </div>
                        <div class="flex-1 text-center px-4">
                            <i class="fa-solid fa-plane text-xl"></i>
                            <div class="text-xs mt-1">å°ç£è™èˆª IT216</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold">04:00</div>
                            <div class="text-xs opacity-75">HND ç¾½ç”°</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="timeline-container">
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card" id="t-0202-0400">
                        <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill text-blue-600" onclick="setAnchor('t-0202-0400')">04:00 - 05:00</div>
                        <h3 class="text-lg font-bold mt-1">æ©Ÿå ´é€šé—œèˆ‡è£œçµ¦ (åˆ†ç§’å¿…çˆ­)</h3>
                        
                        <ul class="list-disc pl-5 mt-2 space-y-1 text-gray-600 text-sm">
                            <li><strong>04:00 - 04:20</strong>ï½œå…¥å¢ƒå¯©æŸ¥</li>
                            <li><strong>04:20 - 04:30</strong>ï½œæŠµé” HND ç¬¬ä¸‰èˆªå»ˆ 2F å…¥å¢ƒå¤§å»³å–è¡Œæ</li>
                        </ul>

                        <div class="mt-4 bg-red-50 border-l-4 border-red-500 p-3 rounded text-sm text-gray-700">
                            <strong>ğŸš¨ ç·Šæ€¥åˆ†æµç­–ç•¥ (è‹¥ 04:30 å°šæœªæ‹¿åˆ°è¡Œæ)ï¼š</strong>
                            <p class="mt-1">è‹¥æ™‚é–“ç·Šè¿«ï¼Œè«‹ç«‹åˆ»åˆ†çµ„è¡Œå‹•ï¼š</p>
                            <ol class="list-decimal pl-5 mt-1 space-y-1">
                                <li><strong>è¡Œæçµ„ (5ç”·)ï¼š</strong> ç•™åœ¨è½‰ç›¤è™•ç­‰å¾…ä¸¦é ˜å–æ‰€æœ‰è¡Œæã€‚</li>
                                <li><strong>æ¡è³¼çµ„ (4å¥³)ï¼š</strong> å…ˆå»ä¸‹ä¸€ç«™(Lawson)æ¡è³¼ï¼Œè²·å®Œç›´æ¥åˆ°é›†åˆé»æœƒåˆã€‚</li>
                            </ol>
                            <div class="mt-2 pt-2 border-t border-red-200">
                                <strong>ğŸ“ æœ€çµ‚é›†åˆé»ï¼š</strong> ç¬¬ä¸‰èˆªå»ˆ2F ç¾½ç”°æ©Ÿå ´è§€å…‰è³‡è¨Šä¸­å¿ƒ
                                <a href="https://maps.app.goo.gl/diAxNd1oA83QAMbr7" target="_blank" class="map-btn bg-red-100 text-red-800 border-red-200"><i class="fa-solid fa-location-dot"></i> é›†åˆé»åœ°åœ–</a>
                            </div>
                        </div>

                        <div class="mt-6">
                            <h4 class="font-bold flex items-center gap-2">
                                <i class="fa-solid fa-store text-blue-600 text-xl"></i> 04:35 Lawson æ¡è³¼
                            </h4>
                            <p class="text-sm text-gray-500 mb-2">ç›®æ¨™ï¼šæ—©é¤ + æœªä¾†å¹¾æ—¥åœ¨é›ªåœ‹çš„é›¶é£Ÿå®µå¤œã€‚</p>
                            <div class="bg-gray-100 p-3 rounded text-sm mb-2">
                                <p><strong>å‹•ç·š 1 (å…¥å¢ƒå¾Œ)ï¼š</strong> èµ°é€²å…¥å¢ƒå¤§å»³å³åˆ»ã€Œå³è½‰ã€æ­é›»æ¢¯ä¸‹æ¨“ã€‚</p>
                                <p><strong>å‹•ç·š 2 (å¾é›†åˆé»)ï¼š</strong> è§€å…‰è³‡è¨Šä¸­å¿ƒã€Œæ­£å¾Œæ–¹ã€é›»æ¢¯ä¸‹æ¨“ã€‚</p>
                            </div>
                            <div class="flex flex-col gap-2">
                                <a href="https://maps.app.goo.gl/yjEx2yYdytEBU6o17" target="_blank" class="map-btn"><i class="fa-solid fa-map-pin"></i> Google Maps</a>
                                <a href="https://platinumaps.jp/d/haneda?culture=zh-tw&c=all&gm=121&floor=2F&area=9&list=1&dir=1&src=spot-367393&dst=spot-352989" target="_blank" class="map-btn bg-indigo-50 text-indigo-700 border-indigo-200"><i class="fa-solid fa-location-arrow"></i> ç·šä¸Šè·¯ç·šå°èˆª (3F -> 1F)</a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card" id="t-0202-0509">
                        <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill text-blue-600" onclick="setAnchor('t-0202-0509')">05:09 - 06:08</div>
                        <h3 class="text-lg font-bold mt-1">å–®è»Œé›»è»Š â” JRè½‰ä¹˜ (é—œéµè·¯å¾‘)</h3>
                        
                        <div class="space-y-4 mt-3">
                            <div class="border-l-4 border-green-500 pl-3">
                                <div class="font-bold text-lg">05:09 æ­ä¹˜ æ±äº¬å–®è»Œé›»è»Š</div>
                                <div class="text-gray-600">å¾€ æ¿±æ¾ç”º (Hamamatsucho)</div>
                                <div class="text-sm text-gray-500 mt-1">æŠµé”å¾Œå‰å¾€ 2F ä¸­å¤®å£ è½‰è»Š</div>
                            </div>

                            <div class="border-l-4 border-green-500 pl-3">
                                <div class="font-bold text-lg">05:33 è½‰ä¹˜ JR äº¬æ¿±æ±åŒ—ç·š</div>
                                <div class="text-gray-600">æ¿±æ¾ç”º â” æ±äº¬è»Šç«™ (ç´„7åˆ†)</div>
                                <div class="text-sm text-gray-500">æ–¹å‘ï¼šä¸Šé‡ã€å¤§å®®æ–¹å‘</div>
                            </div>

                            <div class="border-l-4 border-red-500 pl-3">
                                <div class="font-bold text-lg text-red-600">05:40 æ±äº¬è»Šç«™å¤§ç§»å‹•</div>
                                <div class="text-gray-700">JR åœ¨ä¾†ç·š â” æ–°å¹¹ç·š</div>
                                <div class="text-sm text-gray-500">å¾ã€Œ3è™Ÿæœˆå°ã€ç§»å‹•åˆ°ã€Œ20-23æœˆå°ã€</div>
                            </div>
                        </div>

                        <button class="route-btn" onclick="openRouteModal('modal-tokyo-transfer')">
                            <i class="fa-solid fa-images"></i> æŸ¥çœ‹ã€Œè»Šå»‚ä½ç½®ã€èˆ‡ã€Œæ±äº¬è»Šç«™è½‰ä¹˜ã€è©³ç´°åœ–è§£
                        </button>
                        
                        <div id="modal-tokyo-transfer" class="hidden">
                            <h3 class="text-xl font-bold mb-4">è©³ç´°è·¯ç·šæŒ‡å¼•</h3>
                            
                            <h4 class="font-bold text-blue-600 mt-4">1. å–®è»Œé›»è»Šè»Šå»‚ç­–ç•¥</h4>
                            <p class="mb-2">åã€Œä¸­é–“ååŒ—ã€çš„è»Šå»‚ä½ç½®ï¼Œé è¿‘æ¿±æ¾ç”ºç«™çš„å‡ºå£ã€‚</p>
                            <img src="https://hackmd.io/_uploads/ByPI29JSbx.png" class="content-img" alt="è»Šå»‚ä½ç½®å»ºè­°">
                            
                            <h4 class="font-bold text-blue-600 mt-6">2. æ¿±æ¾ç”ºè½‰ä¹˜æŒ‡å¼•</h4>
                            <img src="https://hackmd.io/_uploads/r1LvNqJHZe.png" class="content-img" alt="è½‰ä¹˜æŒ‡å¼•1">
                            <img src="https://hackmd.io/_uploads/HyC1bc1SWe.png" class="content-img" alt="è½‰ä¹˜æŒ‡å¼•2">
                            
                            <h4 class="font-bold text-blue-600 mt-6">3. æ±äº¬è»Šç«™å¹³é¢è·¯ç·šåœ–</h4>
                            <p class="mb-2 text-red-500 font-bold">è«‹æŒ‰åœ–ä¸Šè·¯ç·šç§»å‹•ï¼š</p>
                            <img src="https://hackmd.io/_uploads/BkoovYkBWx.jpg" class="content-img" alt="è·¯ç·šåœ–1">
                            <img src="https://hackmd.io/_uploads/B1jjvtkHWx.jpg" class="content-img" alt="è·¯ç·šåœ–2">
                            <img src="https://hackmd.io/_uploads/HksoPY1HWl.jpg" class="content-img" alt="è·¯ç·šåœ–3">
                            <img src="https://hackmd.io/_uploads/rJioDF1SZx.jpg" class="content-img" alt="è·¯ç·šåœ–4">

                            <h4 class="font-bold text-blue-600 mt-6">4. ç«™å…§è£œçµ¦ NewDays</h4>
                            <p>è½‰ä¹˜æ™‚é–“å……è£•å¯è£œè²¨ã€‚</p>
                            <a href="https://maps.app.goo.gl/HbEaUckHc3HYLoZm8" target="_blank" class="map-btn text-xs py-1 mb-2">NewDays ä½ç½®</a>
                            <img src="https://hackmd.io/_uploads/HkdeucJH-g.jpg" class="content-img" alt="NewDays">
                        </div>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card" id="t-0202-0608">
                         <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill text-blue-600" onclick="setAnchor('t-0202-0608')">06:08 - 09:15</div>
                        <h3 class="text-lg font-bold mt-1">æ–°å¹¹ç·š & é›ªå…·ç§Ÿè³ƒ</h3>
                        <ul class="space-y-4 mt-3 text-gray-700">
                            <li class="pl-4 border-l-2 border-gray-300">
                                <strong>06:08 - 07:22ï½œæ­ä¹˜æ–°å¹¹ç·š</strong>
                                <p class="text-sm text-gray-500">æ±äº¬ â” è¶Šå¾Œæ¹¯æ¾¤ (è£œçœ æ™‚é–“)</p>
                            </li>
                            <li class="pl-4 border-l-2 border-gray-300">
                                <strong>08:00 - 09:00ï½œé’é”é›ªå…· (æ±å£åº—)</strong>
                                <p class="text-sm">ç§Ÿå…¨æ–° Burton é›ªå…·ã€‚</p>
                                <p class="text-xs text-orange-600 font-bold bg-orange-50 p-1 inline-block mt-1">âš ï¸ å°å¿ƒä½¿ç”¨ï¼Œé¿å…åˆ®å‚·é›ªæ¿</p>
                            </li>
                            <li class="pl-4 border-l-2 border-gray-300">
                                <strong>09:00 - 09:15ï½œç§»å‹•è‡³é£¯åº—</strong>
                                <p class="text-sm">æ­é’é”å°ˆè»Šå›é£¯åº—æ”¾è¡Œæã€‚</p>
                                <p class="text-xs text-red-600 font-bold mt-1">âš ï¸ æ¯å€‹äººè¦æº–å‚™è¢‹å­æ”¶ç´è‡ªå·±çš„é‹å­ï¼Œä¸¦æ”¾åˆ°è¡Œæç®±ä¸­ã€‚</p>
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card" id="t-0202-0930">
                        <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill text-blue-600" onclick="setAnchor('t-0202-0930')">09:30 - 17:00</div>
                        <h3 class="text-lg font-bold mt-1">ğŸ¿ æ»‘é›ªï¼šå²©åŸæ»‘é›ªå ´</h3>
                        <p class="text-gray-600 mb-4">å¯¬å»£å¹³ç·©ï¼Œé©åˆé¦–æ—¥æš–èº«æˆ–åˆå­¸è€…ã€‚</p>
                        
                        <div class="bg-yellow-50 border border-yellow-200 p-4 rounded-xl">
                            <h4 class="font-bold text-yellow-800"><i class="fa-solid fa-pizza-slice mr-1"></i> 13:30 åˆé¤ï¼šPizzeria La locanda del pittore</h4>
                            <p class="text-sm text-yellow-800 mt-1">æ”»ç•¥ï¼šå¼·çƒˆå»ºè­°ä¸€æ—©æŠµé”é›ªå ´æ™‚ï¼Œå°±å…ˆæ´¾äººå»é¤å»³é è¨‚ä½å­ï¼</p>
                        </div>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card" id="t-0202-1700">
                        <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill text-blue-600" onclick="setAnchor('t-0202-1700')">17:00</div>
                        <h3 class="text-lg font-bold mt-1">ğŸ¨ æ™šé–“ä¼‘æ¯</h3>
                        <ul class="list-disc pl-5 mt-2 text-gray-700">
                            <li>æ­ä¹˜é£¯åº—å°ˆè»Šè¿”å›é£¯åº—ã€‚</li>
                            <li><strong>å…¥ä½ï¼š</strong> Chenda International Hotel çŸ³æ‰“BASEã€‚</li>
                            <li><strong>18:30</strong>ï½œé£¯åº—æ™šé¤</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <section id="feb3" class="tab-content hidden">
            <div class="timeline-container pt-4">
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card" id="t-0203-0830">
                         <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill text-blue-600" onclick="setAnchor('t-0203-0830')">08:30 - 17:00</div>
                        <h3 class="text-lg font-bold">ğŸ¿ çŸ³æ‰“ä¸¸å±± (Ishiuchi Maruyama)</h3>
                        <div class="space-y-2 mt-3 text-gray-700">
                            <p><strong>07:30</strong> é£¯åº—æ—©é¤</p>
                            <p><strong>08:20</strong> å¤§å»³é›†åˆ (å…¨è£å‚™)</p>
                            <p><strong>08:30</strong> æ­ä¹˜é£¯åº—å°ˆè»Šå‡ºç™¼</p>
                        </div>
                        <div class="mt-4 bg-gray-50 p-3 rounded text-sm">
                            <p><strong>ç‰¹è‰²ï¼š</strong> æ–°æ½Ÿåœ°å€æœ€å»£é—Šçš„è¦–é‡èˆ‡è±å¯Œåœ°å½¢ã€‚</p>
                        </div>
                    </div>
                </div>
                <div class="timeline-item">
                     <div class="timeline-dot"></div>
                    <div class="card" id="t-0203-1700">
                        <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill text-blue-600" onclick="setAnchor('t-0203-1700')">17:00</div>
                        <h3 class="text-lg font-bold">æ™šé–“ä¼‘æ¯</h3>
                        <p class="text-gray-600">æ­è»Šå›é£¯åº—ï¼Œ18:30 æ™šé¤ã€‚</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="feb4" class="tab-content hidden">
            <div class="timeline-container pt-4">
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card" id="t-0204-0830">
                        <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill text-blue-600" onclick="setAnchor('t-0204-0830')">08:30 - 16:30</div>
                        <h3 class="text-lg font-bold">ğŸ¿ ç¥ç«‹é«˜åŸ (Kandatsu)</h3>
                         <div class="space-y-2 mt-3 text-gray-700">
                            <p><strong>07:30</strong> é£¯åº—æ—©é¤</p>
                            <p><strong>08:20</strong> å¤§å»³é›†åˆ</p>
                            <p><strong>08:30</strong> æ­ä¹˜é£¯åº—å°ˆè»Šå‡ºç™¼</p>
                        </div>
                        <div class="mt-4 p-3 rounded border border-orange-200 bg-orange-50 text-orange-800 text-sm">
                            <strong>âš ï¸ æ³¨æ„ï¼š</strong> æ¯”çŸ³æ‰“ä¸¸å±±æ—©åŠå°æ™‚é—œé–€ (16:30)
                        </div>
                        <div class="mt-2 text-sm text-gray-500">ç‰¹è‰²ï¼šè™Ÿç¨±ã€Œé›ªå ´å¤œåº—ã€ï¼Œåœ°å½¢é›†ä¸­æœ‰è¶£ã€‚</div>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card" id="t-0204-1700">
                        <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill text-blue-600" onclick="setAnchor('t-0204-1700')">17:00</div>
                        <h3 class="text-lg font-bold">æ™šé–“ä¼‘æ¯</h3>
                        <p class="text-gray-600">æ­è»Šå›é£¯åº—ï¼Œ18:30 æ™šé¤ã€‚</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="feb5" class="tab-content hidden">
            <div class="timeline-container pt-4">
                 <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card" id="t-0205-0830">
                        <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill text-blue-600" onclick="setAnchor('t-0205-0830')">08:30 - 17:00</div>
                        <h3 class="text-lg font-bold">ğŸ¿ çŸ³æ‰“ä¸¸å±± (æœ€çµ‚è¡åˆº)</h3>
                        <p class="mt-2 text-gray-600">æŠŠæ¡æ™‚é–“äº«å—æ–°æ½Ÿçš„ç²‰é›ªã€‚</p>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card border-l-4 border-l-red-500" id="t-0205-1700">
                        <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill text-blue-600" onclick="setAnchor('t-0205-1700')">17:00 - 18:30</div>
                        <h3 class="text-lg font-bold text-red-700">ğŸ”„ æ’¤æ”¶èˆ‡æ­¸é‚„ (é—œéµæµç¨‹)</h3>
                        <div class="mt-3">
                            <div class="font-bold text-xl text-red-600 mb-2">18:00 æ­¸é‚„ Deadline</div>
                            <ol class="list-decimal pl-5 space-y-2 text-gray-800">
                                <li>æ¸…æ½”ä¸¦æ•´ç†ç§Ÿå€Ÿçš„è£å‚™ã€‚</li>
                                <li><strong>ğŸ“¸ æ‹ç…§å­˜è­‰</strong> <span class="text-sm text-gray-500">(å‹™å¿…æ‹ç…§ç¢ºèªç„¡æå£ã€ç„¡éºæ¼)ã€‚</span></li>
                                <li>å®Œæˆæ­¸é‚„æ‰‹çºŒã€‚</li>
                            </ol>
                            <p class="mt-4 pt-3 border-t font-bold text-indigo-700">18:30ï½œé£¯åº—æ™šé¤ (æ…¶åŠŸå®´ï¼)</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="feb6" class="tab-content hidden">
            <div class="bg-indigo-50 p-4 rounded-xl mb-6 border border-indigo-100">
                <h2 class="text-xl font-bold text-indigo-900">è¶Šå¾Œæ¹¯æ¾¤ â” æ±äº¬æ–°å®¿ â” å…­æœ¬æœ¨</h2>
            </div>
            
            <div class="timeline-container">
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card" id="t-0206-0800">
                        <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill text-blue-600" onclick="setAnchor('t-0206-0800')">08:00 - 12:30</div>
                        <h3 class="text-lg font-bold">æ–°å¹¹ç·šç§»å‹•</h3>
                        <ul class="mt-2 space-y-2 text-gray-700">
                            <li>08:00 é£¯åº—æ—©é¤</li>
                            <li><strong>09:45 Check-out (å¤§å»³é›†åˆ)</strong> <span class="text-red-500 text-xs font-bold px-2 py-0.5 bg-red-100 rounded">å‹¿é²åˆ°</span></li>
                            <li>10:00 æ­ä¹˜é£¯åº—æ¥é§è»Šå¾€è»Šç«™</li>
                            <li><strong>10:33 ğŸš„ Toki 314è™Ÿ</strong> (å¾€ä¸Šé‡)</li>
                            <li>11:54 æŠµé” ä¸Šé‡è»Šç«™</li>
                            <li>12:30 æŠµé”æ·ºè‰æ©‹ Route-Inn (å¯„æ”¾è¡Œæ)</li>
                        </ul>
                         <a href="https://www.google.com/maps/search/?api=1&query=Hotel+Route-Inn+Grand+Tokyo+Asakusabashi" target="_blank" class="map-btn"><i class="fa-solid fa-hotel"></i> Route-Inn Asakusabashi</a>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card" id="t-0206-1250">
                        <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                         <div class="time-pill text-blue-600" onclick="setAnchor('t-0206-1250')">12:50 - 14:30</div>
                        <h3 class="text-lg font-bold">ğŸ— åˆé¤ï¼šé³¥è‰¯å•†åº—</h3>
                        <p class="text-gray-600">æ·ºè‰æ©‹ç«™å‰åº—ã€‚æ‹›ç‰Œæ‰‹ç¾½å…ˆï¼ˆç‚¸é›ç¿…ï¼‰èˆ‡åˆé–“å®šé£Ÿã€‚</p>
                        <a href="https://www.google.com/maps/search/?api=1&query=Toriyoshi+Shoten+Asakusabashi+Ekimae" target="_blank" class="map-btn"><i class="fa-solid fa-utensils"></i> é¤å»³ä½ç½®</a>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card" id="t-0206-1430">
                         <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill text-blue-600" onclick="setAnchor('t-0206-1430')">14:30 - 17:45</div>
                        <h3 class="text-lg font-bold">ğŸ›ï¸ æ–°å®¿æ¡è³¼ (è—¥å¦ & å”å‰è¨¶å¾·)</h3>
                        <p class="text-sm text-gray-500 mb-4">äº¤é€šï¼šå¾æ·ºè‰æ©‹æ­ã€ŒJRç¸½æ­¦ç·šã€ç›´é”æ–°å®¿ (ç´„ 20 åˆ†é˜)ã€‚</p>

                        <div class="space-y-6">
                            <div>
                                <h4 class="font-bold text-blue-600">1. Sun Drug æ–°å®¿ä¸­å¤®æ±å£ (é¦–é¸)</h4>
                                <p class="text-sm text-gray-500">ä½ç½®æœ€æ–¹ä¾¿ï¼Œåƒ¹æ ¼æœ€å…·ç«¶çˆ­åŠ›ã€‚</p>
                                <a href="https://www.google.com/maps/search/?api=1&query=Sundrug+Shinjuku+Chuo+Higashi-guchi" target="_blank" class="map-btn py-2 text-sm">Google Maps</a>
                            </div>
                            
                            <button class="route-btn" onclick="openRouteModal('modal-shinjuku-shopping')">
                                <i class="fa-solid fa-list-ul"></i> æŸ¥çœ‹å®Œæ•´å‚™æ¡ˆåº—å®¶åˆ—è¡¨
                            </button>
                            <div id="modal-shinjuku-shopping" class="hidden">
                                <h3 class="text-xl font-bold mb-4">è—¥å¦åº—æˆ°ç•¥æ¸…å–®</h3>
                                <div class="space-y-4">
                                    <div class="p-3 bg-gray-50 rounded">
                                        <strong>2. Sun Drug æ–°å®¿é€šåº— (å‚™æ¡ˆ)</strong>
                                        <p class="text-sm text-gray-500">è©•åƒ¹ç¨ä½ï¼Œä½†åº—é¢çœ‹èµ·ä¾†è¼ƒå¤§ã€‚</p>
                                        <a href="https://www.google.com/maps/search/?api=1&query=Sundrug+Shinjuku+Dori" target="_blank" class="map-btn py-2 text-sm">Google Maps</a>
                                    </div>
                                    <div class="p-3 bg-gray-50 rounded">
                                        <strong>3. SUGI è—¥å±€ æ–°å®¿ä¸‰ä¸ç›®åº—</strong>
                                        <p class="text-sm text-gray-500">è²¨å…¨ï¼Œä½†è·é›¢è»Šç«™ç¨é ã€‚</p>
                                        <a href="https://www.google.com/maps/search/?api=1&query=Sugi+Drug+Shinjuku+3-chome" target="_blank" class="map-btn py-2 text-sm">Google Maps</a>
                                    </div>
                                    <div class="p-3 bg-gray-50 rounded">
                                        <strong>4. KoKuMiN Drug (æ–°å®¿åœ°ä¸‹è¡— B1)</strong>
                                        <p class="text-sm text-gray-500">ä½æ–¼åœ°ä¸‹é€£é€šé“ï¼Œä¸æ€•é¢¨å¹é›¨æ·‹ã€‚</p>
                                        <a href="https://www.google.com/maps/search/?api=1&query=KoKuMiN+Drug+Shinjuku+Metro+Pia" target="_blank" class="map-btn py-2 text-sm">Google Maps</a>
                                    </div>
                                </div>
                            </div>

                            <div class="pt-4 border-t">
                                <h4 class="font-bold text-yellow-600">ğŸ§ å”å‰è¨¶å¾· (æ­Œèˆä¼ç”º)</h4>
                                <p class="text-sm text-gray-500">æœ€å¾Œè£œè²¨ã€‚äººæ½®æ¥µåº¦æ“æ“ ï¼Œçµå¸³è«‹é ç•™æ™‚é–“ã€‚</p>
                                <a href="https://www.google.com/maps/search/?api=1&query=Don+Quijote+Shinjuku+Kabukicho" target="_blank" class="map-btn py-2 text-sm bg-yellow-100 text-yellow-800 border-yellow-200">Google Maps</a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card" id="t-0206-1800">
                         <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill text-blue-600" onclick="setAnchor('t-0206-1800')">18:00 - 20:00</div>
                        <h3 class="text-lg font-bold">ğŸ¥˜ æ™šé¤ï¼šMo-Mo-Paradise æœ¬åº—</h3>
                        <p class="text-gray-600">å£½å–œç‡’åƒåˆ°é£½å§‹ç¥–ã€‚Humax Pavilion 8æ¨“ã€‚</p>
                        <p class="text-sm text-gray-500 mt-1">é ç®—ï¼šç´„ NT$ 1,610 /äºº</p>
                        <a href="https://www.google.com/maps/search/?api=1&query=Mo-Mo-Paradise+Kabukicho+Honten" target="_blank" class="map-btn"><i class="fa-solid fa-utensils"></i> é¤å»³ä½ç½®</a>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card" id="t-0206-2030">
                        <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill text-blue-600" onclick="setAnchor('t-0206-2030')">20:30 - 22:30</div>
                        <h3 class="text-lg font-bold">ğŸŒƒ å…­æœ¬æœ¨ï¼šæ«¸å‚é€šå†¬æ—¥é»ç‡ˆ</h3>
                        <p class="text-sm text-indigo-600 font-bold mb-2">ğŸ‰ å®˜æ–¹ç¢ºèªæœ‰é»ç‡ˆæ´»å‹•ï¼</p>
                        <ul class="text-gray-700 text-sm list-disc pl-5 mb-3">
                            <li><strong>20:30</strong> æ–°å®¿æ­å¤§æ±Ÿæˆ¶ç·šå¾€å…­æœ¬æœ¨ã€‚</li>
                            <li><strong>21:10</strong> æŠµé”æ«¸å‚é€šã€‚</li>
                            <li><strong>æ‹ç…§é»ï¼š</strong> å»ºè­°ç«™åœ¨ã€Œè”¦å±‹æ›¸åº—ã€é™„è¿‘çš„å¤©æ©‹ä¸Š (è¡—é“+æ±äº¬éµå¡”)ã€‚</li>
                        </ul>
                        <a href="https://www.google.com/maps/search/?api=1&query=Roppongi+Keyakizaka+Dori" target="_blank" class="map-btn"><i class="fa-solid fa-camera"></i> å…­æœ¬æœ¨æ«¸å‚é€š</a>
                    </div>
                </div>
            </div>
        </section>

        <section id="feb7" class="tab-content hidden">
            <div class="card border-2 border-red-100" id="t-0207-0930">
                <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                <div class="time-pill text-blue-600" onclick="setAnchor('t-0207-0930')">09:30 - 11:10</div>
                <h3 class="text-xl font-bold mb-2">ğŸ›ï¸ ä¼´æ‰‹ç¦®æ¡è³¼ä½œæˆ° (100åˆ†é˜)</h3>
                <div class="bg-red-50 text-red-800 p-3 rounded mb-4 text-sm font-bold">
                    âš ï¸ æ ¸å¿ƒåŸå‰‡ï¼šç”±ã€Œç«™å…§ã€è²·åˆ°ã€Œç«™å¤–ã€ï¼Œåš´æ ¼æ§åˆ¶æ™‚é–“ã€‚
                    <br>11:10 å¿…é ˆæ’¤é€€å›é£¯åº—ï¼
                </div>
                
                <h4 class="text-green-600 font-bold border-b border-green-200 pb-1 mb-2">ğŸŸ¢ ç¬¬ä¸€éšæ®µï¼šç«™å…§ (09:30 - 10:00)</h4>
                <div class="pl-2 space-y-4 mb-6">
                    <div>
                        <strong>1. NEWYORK PERFECT CHEESE</strong>
                        <a href="https://www.google.com/maps/search/?api=1&query=NEWYORK+PERFECT+CHEESE+Tokyo+Station" target="_blank" class="inline-block ml-2 text-green-600"><i class="fa-solid fa-map-pin"></i></a>
                        <p class="text-xs text-red-500 font-bold">è‹¥æ’éšŠè¶…é 15 åˆ†é˜ç«‹åˆ»æ’¤é€€ã€‚</p>
                    </div>
                    <div>
                        <strong>2. å–«èŒ¶åº—ã«æ‹ã—ã¦ã€‚</strong>
                        <a href="https://www.google.com/maps/search/?api=1&query=å–«èŒ¶åº—ã«æ‹ã—ã¦+æ±äº¬é§…+ã‚°ãƒ©ãƒ³ã‚¹ã‚¿" target="_blank" class="inline-block ml-2 text-green-600"><i class="fa-solid fa-map-pin"></i></a>
                        <p class="text-xs text-gray-500">B1 éŠ€ä¹‹éˆ´æ—ï¼Œé€šå¸¸ä¸æ’éšŠã€‚</p>
                    </div>
                </div>

                <h4 class="text-yellow-600 font-bold border-b border-yellow-200 pb-1 mb-2">ğŸŸ¡ ç¬¬äºŒéšæ®µï¼šç«™å¤– (10:00 - 11:00)</h4>
                <div class="pl-2 space-y-4">
                    <div>
                        <strong class="block mb-1">å¤§ä¸¸æ±äº¬åº— 1F</strong>
                        <a href="https://www.google.com/maps/search/?api=1&query=å¤§ä¸¸æ±äº¬åº—" target="_blank" class="map-btn py-1 text-xs inline-flex mb-2">Google Maps</a>
                        <div class="flex flex-wrap gap-2">
                            <a href="https://www.google.com/maps/search/?api=1&query=Sugar+Butter+Tree+Daimaru+Tokyo" target="_blank" class="text-xs bg-gray-100 border px-2 py-1 rounded">Sugar Butter Tree</a>
                            <a href="https://www.google.com/maps/search/?api=1&query=PRESS+BUTTER+SAND+Daimaru+Tokyo" target="_blank" class="text-xs bg-gray-100 border px-2 py-1 rounded">PRESS BUTTER SAND</a>
                            <a href="https://www.google.com/maps/search/?api=1&query=N.Y.C.SAND+Daimaru+Tokyo" target="_blank" class="text-xs bg-gray-100 border px-2 py-1 rounded">N.Y.C.SAND (æ’éšŠæ³¨æ„)</a>
                        </div>
                    </div>
                     <div>
                        <strong class="block mb-1">Tokyo Gift Palette</strong>
                        <a href="https://www.google.com/maps/search/?api=1&query=Tokyo+Gift+Palette" target="_blank" class="map-btn py-1 text-xs inline-flex mb-2">Google Maps</a>
                        <div class="flex flex-wrap gap-2">
                            <a href="https://www.google.com/maps/search/?api=1&query=Brulee+Merize+Tokyo+Station" target="_blank" class="text-xs bg-gray-100 border px-2 py-1 rounded">Brulee Merize</a>
                            <a href="https://www.google.com/maps/search/?api=1&query=Pista+and+Tokyo+Tokyo+Station" target="_blank" class="text-xs bg-gray-100 border px-2 py-1 rounded">Pista & Tokyo</a>
                        </div>
                    </div>
                </div>
                
                 <div class="mt-4 pt-4 border-t flex justify-between items-center">
                    <span class="font-bold text-red-600">11:10 æ’¤é€€ (JRå…«é‡æ´²åŒ—å£)</span>
                    <a href="https://maps.app.goo.gl/gaL6keTWb3YDzccM8" target="_blank" class="text-sm bg-gray-200 px-3 py-1 rounded">é€²ç«™ä½ç½®</a>
                </div>
            </div>

            <div class="timeline-container mt-10">
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card bg-slate-800 text-white" id="t-0207-1200">
                        <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill text-slate-800 bg-white" onclick="setAnchor('t-0207-1200')">12:00</div>
                        <h3 class="text-lg font-bold mt-1">ğŸš å¯Œå£«å±±èŠ±ç«å°ˆè»Šç™¼è»Š</h3>
                        <p class="text-slate-300 text-sm mb-2">Klook è¡Œç¨‹ï¼Œä¸­æ–‡å°éŠã€‚é£¯åº—å¤§å»³é›†åˆã€‚</p>
                        <p class="text-yellow-400 font-bold text-sm">â„ï¸ å‹™å¿…æ”œå¸¶ä¿æš–è¡£ç‰©ï¼ˆæ‰‹å¥—ã€åœå·¾ã€æ¯›å¸½ï¼‰</p>
                    </div>
                </div>
                
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card" id="t-0207-tour">
                        <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill text-blue-600" onclick="setAnchor('t-0207-tour')">è¡Œç¨‹æ™¯é»</div>
                        <div class="space-y-6 mt-3">
                            <div>
                                <strong class="text-lg text-blue-800">1. æ–°å€‰å±±æ·ºé–“å…¬åœ’ (14:30)</strong>
                                <p class="text-sm text-gray-500">äº”é‡å¡”ï¼‹å¯Œå£«å±±ã€‚éœ€çˆ¬ 398 éšæ¨“æ¢¯ã€‚</p>
                                <a href="https://www.google.com/maps/search/?api=1&query=æ–°å€‰å±±æ·ºé–“å…¬åœ’" target="_blank" class="map-btn py-1 text-xs inline-flex mt-1">Google Maps</a>
                            </div>
                            <div>
                                <strong class="text-lg text-blue-800">2. æ—¥å·æ™‚è¨ˆåº— (15:50)</strong>
                                <p class="text-sm text-gray-500">æ˜­å’Œé¢¨è¡—é“ï¼Œæ³¨æ„ä¾†è»Šã€‚</p>
                                <a href="https://www.google.com/maps/search/?api=1&query=æ—¥å·æ™‚è¨ˆåº—" target="_blank" class="map-btn py-1 text-xs inline-flex mt-1">Google Maps</a>
                            </div>
                            <div>
                                <strong class="text-lg text-blue-800">3. ç¾…æ£® (Lawson) (16:20)</strong>
                                <p class="text-sm text-gray-500">ç¶²ç´…æ‰“å¡é»ã€‚</p>
                                <a href="https://maps.app.goo.gl/X1vLNQTi2GihRJBD7" target="_blank" class="map-btn py-1 text-xs inline-flex mt-1">Google Maps</a>
                            </div>
                            <div>
                                <strong class="text-lg text-blue-800">4. å¿é‡å…«æµ· (17:10)</strong>
                                <p class="text-sm text-gray-500">æ¨è–¦ï¼šè‰é¤…ã€è±†è…ã€çƒ¤é­šã€‚</p>
                                <a href="https://www.google.com/maps/search/?api=1&query=å¿é‡å…«æµ·" target="_blank" class="map-btn py-1 text-xs inline-flex mt-1">Google Maps</a>
                            </div>
                             <div>
                                <strong class="text-lg text-blue-800">5. æ²³å£æ¹–å¤§çŸ³å…¬åœ’ (19:20)</strong>
                                <p class="text-sm text-gray-500">ç­‰å¾…èŠ±ç«ã€‚æ­¤æ™‚è«‹å°‡ä¿æš–è£å‚™å…¨æ•¸ç©¿ä¸Šã€‚</p>
                                <a href="https://www.google.com/maps/search/?api=1&query=æ²³å£æ¹–å¤§çŸ³å…¬åœ’" target="_blank" class="map-btn py-1 text-xs inline-flex mt-1">Google Maps</a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card border-2 border-purple-200" id="t-0207-2000">
                        <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill text-blue-600" onclick="setAnchor('t-0207-2000')">20:00 - 20:20</div>
                        <h3 class="text-lg font-bold text-purple-700">ğŸ† æ²³å£æ¹–å†¬èŠ±ç«</h3>
                        <p class="text-gray-600">è§€è³é»ï¼šæ²³å£æ¹–å¤§æ± å…¬åœ’å‘¨é‚Š</p>
                        <a href="https://www.google.com/maps/search/?api=1&query=æ²³å£æ¹–å¤§æ± å…¬åœ’" target="_blank" class="map-btn bg-purple-50 text-purple-800 border-purple-200"><i class="fa-solid fa-fire"></i> å¤§æ± å…¬åœ’åœ°åœ–</a>
                    </div>
                </div>

                 <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card" id="t-0207-2225">
                         <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill text-blue-600" onclick="setAnchor('t-0207-2225')">22:25</div>
                        <h3 class="text-lg font-bold">æŠµé”é£¯åº—</h3>
                        <p class="text-gray-500">çµæŸéµè…¿çš„ä¸€å¤©ã€‚</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="feb8" class="tab-content hidden">
            <div class="timeline-container pt-4">
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card" id="t-0208-0955">
                        <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill text-blue-600" onclick="setAnchor('t-0208-0955')">09:55 Check-out</div>
                        <p class="text-gray-700">è¡Œæçµ±ä¸€å¯„æ”¾æ«ƒå°ï¼Œéš¨èº«è¼•è£å‡ºç™¼ã€‚</p>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card" id="t-0208-1030">
                        <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill text-blue-600" onclick="setAnchor('t-0208-1030')">10:30 - 12:30</div>
                        <h3 class="text-lg font-bold">åœ˜é«”æ±ºç­– (äºŒé¸ä¸€)</h3>
                        <div class="text-sm bg-yellow-50 text-yellow-800 p-2 rounded mb-4 mt-2">âš ï¸ å…¨åœ˜çµ±ä¸€è¡Œå°</div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-gray-50 p-4 rounded-xl border border-gray-200">
                                <h4 class="font-bold text-yellow-600">A. æ±‚è²¡æ”¹é‹</h4>
                                <strong class="block text-lg mb-1">å°ç¶²ç¥ç¤¾</strong>
                                <p class="text-sm text-gray-500 mb-3">æ±äº¬æœ€å¼·æ±‚è²¡ï¼Œè¨˜å¾—å¸¶é›¶éŒ¢æˆ–ç´™éˆ”æ´—éŒ¢ã€‚</p>
                                <a href="https://www.google.com/maps/search/?api=1&query=å°ç¶²ç¥ç¤¾" target="_blank" class="map-btn py-2 text-sm">Google Maps</a>
                            </div>
                            <div class="bg-gray-50 p-4 rounded-xl border border-gray-200">
                                <h4 class="font-bold text-pink-600">B. æ™‚å°šæ¡è³¼</h4>
                                <strong class="block text-lg mb-1">éŠ€åº§ Uniqlo / GU</strong>
                                <p class="text-sm text-gray-500 mb-3">12å±¤æ¨“å…¨çƒæ——è‰¦åº—ã€‚</p>
                                <a href="https://www.google.com/maps/search/?api=1&query=UNIQLOéŠ€åº§åº—" target="_blank" class="map-btn py-2 text-sm">Google Maps</a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card" id="t-0208-1230">
                         <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill text-blue-600" onclick="setAnchor('t-0208-1230')">12:30 - 14:50</div>
                        <h3 class="text-lg font-bold">ğŸ¥© éŠ€åº§åˆé¤ï¼šç‡’è‚‰å¤§æ±ºæˆ°</h3>
                        <div class="space-y-4 mt-3">
                            <div class="pl-3 border-l-4 border-gray-300">
                                <strong class="text-lg">A. ç²¾ç·»åŒ…å»‚æ´¾ (ã†ã—ãŠ)</strong>
                                <p class="text-sm text-gray-500">JPY 7,900/äºº - åƒå·§åƒæ°£æ°›</p>
                                <a href="https://www.google.com/maps/search/?api=1&query=å’Œç‰›+å€‹å®¤ç„¼è‚‰+ã†ã—ãŠ+GINZA" target="_blank" class="map-btn py-1 text-xs inline-flex mt-1">Google Maps</a>
                            </div>
                             <div class="pl-3 border-l-4 border-gray-300">
                                <strong class="text-lg">B. è±ªé‚åƒåˆ°é£½æ´¾ (å¾³)</strong>
                                <p class="text-sm text-gray-500">JPY 6,380/äºº - A5é»‘æ¯›å’Œç‰›</p>
                                <a href="https://maps.app.goo.gl/C1JJcaLSiqMRsUQP8" target="_blank" class="map-btn py-1 text-xs inline-flex mt-1">Google Maps</a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card border-2 border-red-500 bg-red-50" id="t-0208-1500">
                         <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill text-red-600 bg-white border-red-200" onclick="setAnchor('t-0208-1500')">15:00 - 17:03</div>
                        <h3 class="text-xl font-bold text-red-700">ğŸš¨ å…¨å“¡å‰å¾€æ©Ÿå ´</h3>
                        <p class="font-bold text-red-600 mb-3">é€™æ˜¯çµ•å°ä¸èƒ½é²åˆ°çš„æ®µè½ï¼</p>
                        <ul class="space-y-2 text-gray-800 text-sm font-medium">
                            <li>15:00 çµæŸåˆé¤å›æ·ºè‰æ©‹ã€‚</li>
                            <li>15:30 é£¯åº—é ˜è¡Œæã€‚</li>
                            <li>16:00 æŠµé” <strong>ä¸Šé‡ç«™ (Keisei Ueno)</strong> <a href="https://maps.app.goo.gl/MHEPz9QxRcgh9RGV7" target="_blank" class="inline-block text-blue-600"><i class="fa-solid fa-map-pin"></i></a></li>
                            <li>16:20 ğŸš… <strong>æ­ä¹˜ Skyliner</strong> (å¾€æˆç”°)ã€‚</li>
                            <li>17:03 âœˆï¸ æŠµé” æˆç”°T2ã€‚</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <div id="infoModal" class="modal-overlay" onclick="closeModal(event)">
        <div class="modal-content" onclick="event.stopPropagation()">
            <button onclick="closeModal()" class="absolute top-4 right-4 text-gray-400 hover:text-gray-800 text-xl"><i class="fa-solid fa-xmark"></i></button>
            <div id="modalBody"></div>
        </div>
    </div>

    <div id="lightbox" class="lightbox" onclick="closeLightbox()">
        <img id="lightboxImg" src="" alt="Full size">
        <p class="text-white mt-4 text-sm bg-black/50 px-3 py-1 rounded">é»æ“Šä»»æ„è™•é—œé–‰</p>
    </div>

    <div id="toast" class="toast">
        <i class="fa-solid fa-link mr-2"></i> å·²è¤‡è£½é€²åº¦é€£çµï¼
    </div>

    <script>
        // --- Tab Logic ---
        const tabs = document.querySelectorAll('.nav-item');
        const contents = document.querySelectorAll('.tab-content');

        function switchTab(tabId) {
            contents.forEach(content => content.classList.add('hidden'));
            const activeContent = document.getElementById(tabId);
            if (activeContent) {
                activeContent.classList.remove('hidden');
                // Only scroll to top if we are NOT loading from a hash
                if (!window.location.hash) {
                    window.scrollTo(0, 0); 
                }
            }

            tabs.forEach(tab => {
                if (tab.dataset.tab === tabId) {
                    tab.classList.add('active');
                    tab.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
                } else {
                    tab.classList.remove('active');
                }
            });
            localStorage.setItem('japanTripActiveTab', tabId);
        }

        tabs.forEach(tab => tab.addEventListener('click', () => {
             // Clear hash when manually switching tabs to avoid confusion
             history.pushState(null, null, ' ');
             switchTab(tab.dataset.tab);
             window.scrollTo(0, 0);
        }));

        // --- Deep Linking & Anchor Logic ---
        function setAnchor(id) {
            // 1. Update Hash
            history.pushState(null, null, '#' + id);
            
            // 2. Highlight UI
            highlightCard(id);

            // 3. Copy to Clipboard
            const url = window.location.href;
            navigator.clipboard.writeText(url).then(() => {
                showToast();
            });
        }

        function highlightCard(id) {
            // Remove previous highlights
            document.querySelectorAll('.active-highlight').forEach(el => el.classList.remove('active-highlight'));
            
            const target = document.getElementById(id);
            if (target) {
                target.classList.add('active-highlight');
                // Scroll to element with offset for header
                const headerOffset = 120;
                const elementPosition = target.getBoundingClientRect().top;
                const offsetPosition = elementPosition + window.pageYOffset - headerOffset;
                
                window.scrollTo({
                    top: offsetPosition,
                    behavior: "smooth"
                });
            }
        }

        function showToast() {
            const toast = document.getElementById('toast');
            toast.style.display = 'block';
            setTimeout(() => { toast.style.display = 'none'; }, 2000);
        }

        // --- Scroll Spy Logic (New) ---
        const observerOptions = {
            root: null,
            rootMargin: '-20% 0px -60% 0px', // Trigger when element is near top
            threshold: 0
        };

        const scrollObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const id = entry.target.id;
                    // Only replace state (URL), DO NOT highlight visual
                    history.replaceState(null, null, '#' + id);
                }
            });
        }, observerOptions);


        // --- Modal Logic ---
        function openRouteModal(contentId) {
            const content = document.getElementById(contentId).innerHTML;
            const modalBody = document.getElementById('modalBody');
            modalBody.innerHTML = content;
            document.getElementById('infoModal').style.display = 'flex';
            
            // Re-attach lightbox listeners to new images in modal
            attachLightboxListeners(); 
        }

        function closeModal(event) {
            if (!event || event.target.id === 'infoModal' || !event.target) {
                document.getElementById('infoModal').style.display = 'none';
            }
        }

        // --- Lightbox Logic ---
        function attachLightboxListeners() {
            const images = document.querySelectorAll('img');
            images.forEach(img => {
                img.onclick = function() {
                    // Ignore small icons
                    if(this.width < 50) return; 
                    document.getElementById('lightboxImg').src = this.src;
                    document.getElementById('lightbox').style.display = 'flex';
                }
            });
        }

        function closeLightbox() {
            document.getElementById('lightbox').style.display = 'none';
        }

        // --- Checkbox Persistence ---
        function initCheckboxes() {
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            checkboxes.forEach((cb, index) => {
                const storageKey = 'japanTrip_cb_' + index;
                if (localStorage.getItem(storageKey) === 'true') {
                    cb.checked = true;
                    toggleStrike(cb);
                }
                cb.addEventListener('change', () => {
                    localStorage.setItem(storageKey, cb.checked);
                    toggleStrike(cb);
                });
            });
        }

        function toggleStrike(checkbox) {
            const span = checkbox.nextElementSibling;
            if (checkbox.checked) span.classList.add('checked-text');
            else span.classList.remove('checked-text');
        }

        function resetChecks() {
            if(confirm('ç¢ºå®šè¦é‡ç½®æ‰€æœ‰å‹¾é¸é …ç›®å—ï¼Ÿ')) {
                const checkboxes = document.querySelectorAll('input[type="checkbox"]');
                checkboxes.forEach((cb, index) => {
                    cb.checked = false;
                    localStorage.removeItem('japanTrip_cb_' + index);
                    toggleStrike(cb);
                });
            }
        }

        // --- Init ---
        document.addEventListener('DOMContentLoaded', () => {
            initCheckboxes();
            attachLightboxListeners();

            // Observe all timeline cards for scroll spy
            document.querySelectorAll('div[id^="t-"]').forEach(section => {
                scrollObserver.observe(section);
            });

            // Check URL Hash for deep linking
            const hash = window.location.hash.substring(1); // remove #
            if (hash) {
                // Find which tab this ID belongs to
                const targetEl = document.getElementById(hash);
                if (targetEl) {
                    const tabSection = targetEl.closest('.tab-content');
                    if (tabSection) {
                        switchTab(tabSection.id);
                        setTimeout(() => highlightCard(hash), 300); // delay for rendering
                    }
                }
            } else {
                // Default Tab
                const savedTab = localStorage.getItem('japanTripActiveTab');
                switchTab(savedTab && document.getElementById(savedTab) ? savedTab : 'prep');
            }
        });
    </script>
</body>
</html>
