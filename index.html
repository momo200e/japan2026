<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ—¥æœ¬æ»‘é›ªè¡Œ (2026)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f3f4f6; /* Gray 100 */
            color: #374151; /* Gray 700 */
            -webkit-tap-highlight-color: transparent;
            padding-bottom: 120px;
            line-height: 1.8;
            /* æ¢å¾© iOS è§¸åº•å›å½ˆ (Rubber banding) */
            overscroll-behavior-y: auto; 
            overflow-x: hidden;
        }

        html {
            scroll-padding-top: 160px;
            /* è®“æ»‘å‹•æ›´é †æš¢ */
            -webkit-overflow-scrolling: touch;
        }

        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        .sticky-header {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            box-shadow: 0 4px 10px -2px rgba(0, 0, 0, 0.05);
            /* ç¢ºä¿ Header ä¸æœƒå› ç‚ºæ…£æ€§æ»¾å‹•è€Œé–ƒçˆ */
            transform: translateZ(0); 
        }

        .card {
            background: #ffffff;
            border-radius: 18px;
            padding: 18px 16px;
            margin-bottom: 40px; 
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.03);
            border: 1px solid #e5e7eb;
            /* ç§»é™¤ transition é¿å…å½±éŸ¿åŸç”Ÿæ»¾å‹•æ•ˆèƒ½ */
            position: relative;
            
            overflow: visible; 
            transform: translateZ(0);
        }

        .card.active-highlight {
            border: 2px solid #3b82f6;
            box-shadow: 0 10px 30px rgba(59, 130, 246, 0.15);
            transform: scale(1.02) translateZ(0); 
            z-index: 10;
            opacity: 1;
            /* åªæœ‰é«˜äº®æ™‚æ‰åŠ  transition */
            transition: all 0.3s ease;
        }
        
        .current-badge {
            display: none;
            position: absolute;
            top: -12px;
            right: 16px;
            background: #2563eb;
            color: white;
            padding: 4px 12px;
            border-radius: 99px;
            font-size: 0.75rem;
            font-weight: bold;
            box-shadow: 0 4px 6px rgba(0,0,0,0.15);
            z-index: 20;
            animation: bounce 2s infinite;
        }
        .card.active-highlight .current-badge { display: block; }

        .timeline-container {
            position: relative;
            padding-left: 20px;
            border-left: 2px solid #e5e7eb;
            margin-left: 6px;
        }
        .timeline-item { position: relative; }
        .timeline-dot {
            position: absolute;
            left: -27px;
            top: 8px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #fff;
            border: 3px solid #3b82f6;
            z-index: 10;
        }

        .time-badge {
            display: inline-block;
            background-color: #dbeafe;
            color: #1e40af;
            font-size: 0.8rem;
            font-weight: 700;
            padding: 1px 8px;
            border-radius: 6px;
            margin-right: 6px;
            margin-bottom: 4px;
            vertical-align: middle;
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
        }

        .nav-item {
            white-space: nowrap;
            padding: 14px 16px;
            font-size: 0.95rem;
            font-weight: 600;
            color: #6b7280;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.2s;
        }
        .nav-item.active {
            color: #2563eb;
            border-bottom-color: #2563eb;
        }

        .map-btn, .route-btn, .route-btn-sm {
             touch-action: manipulation;
        }

        .map-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            background-color: #f0fdf4;
            color: #15803d;
            padding: 10px;
            border-radius: 10px;
            font-weight: 600;
            text-decoration: none;
            margin-top: 10px;
            border: 1px solid #bbf7d0;
            font-size: 0.9rem;
            transition: background 0.2s;
        }
        .map-btn:hover { background-color: #dcfce7; }

        .route-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            background-color: #eff6ff;
            color: #1d4ed8;
            padding: 12px;
            border-radius: 12px;
            font-weight: 600;
            margin-top: 16px;
            border: 1px dashed #bfdbfe;
            cursor: pointer;
            width: 100%;
            transition: all 0.2s;
            font-size: 0.95rem;
        }
        .route-btn:active { transform: scale(0.98); background-color: #dbeafe; }
        
        .route-btn-sm {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            background-color: #eff6ff;
            color: #1d4ed8;
            border: 1px dashed #bfdbfe;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            padding: 8px 12px;
            margin-top: 8px;
            font-size: 0.85rem;
            width: 100%;
        }

        .time-pill-header {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: #f8fafc;
            padding: 6px 14px;
            border-radius: 99px;
            font-family: monospace;
            font-size: 1.15rem;
            font-weight: 700;
            color: #334155;
            margin-bottom: 12px;
            cursor: pointer;
            border: 1px solid #e2e8f0;
        }
        
        .custom-checkbox {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 12px 8px;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.2s;
            border-bottom: 1px dashed #f3f4f6;
        }
        .custom-checkbox:last-child { border-bottom: none; }
        .custom-checkbox:hover { background: #f9fafb; }
        .custom-checkbox input {
            margin-top: 6px;
            accent-color: #2563eb;
            width: 18px;
            height: 18px;
        }
        .checked-text {
            text-decoration: line-through;
            color: #9ca3af;
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6);
            backdrop-filter: blur(4px);
            z-index: 100;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 16px;
        }
        .modal-content {
            background: white;
            border-radius: 20px;
            width: 100%;
            max-width: 600px;
            max-height: 85vh;
            overflow-y: auto;
            position: relative;
            padding: 24px;
            animation: zoomIn 0.2s;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }

        /* Lightbox */
        .lightbox {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95);
            z-index: 200;
            display: none;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            overflow: hidden;
        }
        
        .lightbox-container {
            width: 100%;
            height: 90%;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
        }

        .lightbox img {
            max-width: 95%;
            max-height: 95%;
            border-radius: 4px;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
            object-fit: contain;
            transition: transform 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            cursor: grab;
            transform-origin: center center;
            user-select: none;
        }
        
        .lightbox img.zoomed {
            cursor: grabbing;
        }

        img.content-img {
            border-radius: 12px;
            border: 1px solid #e5e7eb;
            margin: 16px 0;
            cursor: zoom-in;
            width: 100%;
            height: auto;
            object-fit: cover;
        }
        
        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: #1f2937;
            color: white;
            padding: 12px 24px;
            border-radius: 99px;
            z-index: 300;
            display: none;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            font-size: 0.9rem;
        }
        
        .section-header {
            background-color: #eef2ff;
            border: 1px solid #e0e7ff;
            padding: 16px;
            border-radius: 16px;
            margin-bottom: 24px;
            color: #312e81;
        }

        .content-list li { margin-bottom: 8px; }

        /* Animation Keyframes - èª¿æ•´ç‚º 0.5s */
        @keyframes slideInRight {
            from { opacity: 0; transform: translateX(30px); }
            to { opacity: 1; transform: translateX(0); }
        }
        @keyframes slideInLeft {
            from { opacity: 0; transform: translateX(-30px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        /* å¢åŠ  will-change æå‡ iOS å‹•ç•«æ•ˆèƒ½ */
        .anim-right { 
            animation: slideInRight 0.5s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; 
            will-change: transform, opacity;
        }
        .anim-left { 
            animation: slideInLeft 0.5s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; 
            will-change: transform, opacity;
        }
        
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }
        @keyframes zoomIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
    </style>
</head>
<body>

    <header class="fixed top-0 left-0 w-full z-40 sticky-header">
        <div class="px-4 py-3 flex justify-between items-center border-b border-gray-100">
            <h1 class="text-xl font-bold text-slate-800 tracking-tight"><i class="fa-solid fa-person-skiing text-blue-600 mr-2"></i>æ—¥æœ¬æ»‘é›ªè¡Œ</h1>
            <button onclick="resetChecks()" class="text-xs text-gray-500 border border-gray-300 px-3 py-1.5 rounded-full hover:bg-gray-100 transition">é‡ç½®å‹¾é¸</button>
        </div>
        
        <nav class="flex overflow-x-auto no-scrollbar" id="tabContainer">
            <div class="nav-item" data-tab="prep">è¡Œå‰/å‚™å¿˜</div>
            <div class="nav-item" data-tab="feb1-meeting">2/1 é›†åˆ</div>
            <div class="nav-item" data-tab="feb2">2/2 å‡ºç™¼</div>
            <div class="nav-item" data-tab="feb3">2/3 ä¸¸å±±</div>
            <div class="nav-item" data-tab="feb4">2/4 ç¥ç«‹</div>
            <div class="nav-item" data-tab="feb5">2/5 æœ€çµ‚</div>
            <div class="nav-item" data-tab="feb6">2/6 ç§»å‹•</div>
            <div class="nav-item" data-tab="feb7">2/7 èŠ±ç«</div>
            <div class="nav-item" data-tab="feb8">2/8 è¿”ç¨‹</div>
        </nav>
    </header>

    <div style="height: 120px;"></div>

    <main class="px-2 md:px-4">
        <section id="prep" class="tab-content hidden">
            <div class="section-header">
                <h2 class="text-xl font-bold">ğŸ“ è¡Œå‰æº–å‚™ & å‚™å¿˜</h2>
                <p class="text-sm opacity-80 mt-1">æª¢æŸ¥è£å‚™ã€ä¿éšªèˆ‡é ç´„</p>
            </div>

            <div class="card">
                <h2 class="text-lg font-bold mb-4 flex items-center gap-2"><i class="fa-solid fa-clipboard-check text-blue-600"></i> è¡Œå‰æº–å‚™æ¸…å–®</h2>
                <div class="checklist-group flex flex-col">
                    <label class="custom-checkbox"><input type="checkbox"><span>å»ºè­°å¯ä»¥æŠŠæ»‘é›ªæ’æ±—è¡«æˆ–å…§æ­ï¼Œç›´æ¥ç©¿åœ¨è£¡é¢</span></label>
                    <label class="custom-checkbox"><input type="checkbox"><span>æŠµé”æ©Ÿå ´ä¸è¦ç·šä¸Šå ±åˆ°(ä¾†ç”¨å¯¦é«”æ©Ÿç¥¨æ‰“å¡)</span></label>
                    <label class="custom-checkbox"><input type="checkbox"><span>è³¼è²·æ—…å¹³éšªã€æ„å¤–éšª <span class="text-red-600 font-bold bg-red-50 px-2 py-0.5 rounded text-xs ml-1">!!!æ»‘é›ªéœ€å¦å¤–æŠ•ä¿ç‰¹å®šæ´»å‹•éšª!!!!</span></span></label>
                    <label class="custom-checkbox"><input type="checkbox"><span>æ›å¥½è¶³å¤ æ—¥å¹£ç¾é‡‘</span></label>
                    <label class="custom-checkbox"><input type="checkbox"><span>è­·ç…§ã€è­‰ä»¶ã€eSIM(SIMå¡)è¨˜å¾—å¸¶å¥½</span></label>
                    <label class="custom-checkbox"><input type="checkbox"><span>æå‰å„²å€¼è¥¿ç“œå¡</span></label>
                    <label class="custom-checkbox"><input type="checkbox"><span>å¡«å¯« Visit Japan Web</span></label>
                    <a href="https://www.vjw.digital.go.jp" target="_blank" class="ml-10 text-blue-600 underline text-sm mb-2 block font-medium">å‰å¾€ Visit Japan Web</a>
                    <label class="custom-checkbox"><input type="checkbox"><span>æ±äº¬è»Šç«™ä¼´æ‰‹ç¦®å…ˆåˆ¶å®šå¥½è‡ªå·±çš„è³¼ç‰©æ¸…å–®</span></label>
                </div>
            </div>

            <div class="card">
                <h2 class="text-lg font-bold mb-4 flex items-center gap-2"><i class="fa-solid fa-bell text-yellow-500"></i> æ¯æ—¥å‚™å¿˜æé†’</h2>
                
                <h3 class="font-bold text-gray-500 mt-4 border-b pb-2 mb-2">2/1 (æ—¥)</h3>
                <label class="custom-checkbox"><input type="checkbox"><span>é ç´„éš”å¤©é›ªå ´æ¥é€ <br><span class="text-sm text-gray-500 bg-gray-50 px-2 rounded">2/2(ä¸€) å²©åŸé›ªå ´ï¼Œå»9:30 å›17:00</span></span></label>
                <label class="custom-checkbox"><input type="checkbox"><span>è³¼è²·éš”å¤©çŸ³æ‰“ä¸¸å±±é›ªç¥¨</span></label>

                <h3 class="font-bold text-gray-500 mt-8 border-b pb-2 mb-2">2/2 (ä¸€)</h3>
                <label class="custom-checkbox"><input type="checkbox"><span>é ç´„éš”å¤©é›ªå ´æ¥é€ <br><span class="text-sm text-gray-500 bg-gray-50 px-2 rounded">2/3(äºŒ) çŸ³æ‰“ä¸¸å±± ä¸­å¤®å£ï¼Œå»8:30 å›17:00</span></span></label>

                <h3 class="font-bold text-gray-500 mt-8 border-b pb-2 mb-2">2/3 (äºŒ)</h3>
                <label class="custom-checkbox"><input type="checkbox"><span>é ç´„éš”å¤©é›ªå ´æ¥é€ <br><span class="text-sm text-gray-500 bg-gray-50 px-2 rounded">2/4(ä¸‰) ç¥ç«‹æ»‘é›ªå ´ï¼Œå»7:45 å›17:00</span></span></label>
                <label class="custom-checkbox"><input type="checkbox"><span>è³¼è²·éš”å¤©çŸ³æ‰“ä¸¸å±±é›ªç¥¨</span></label>

                <h3 class="font-bold text-gray-500 mt-8 border-b pb-2 mb-2">2/4 (ä¸‰)</h3>
                <label class="custom-checkbox"><input type="checkbox"><span>é ç´„éš”å¤©é›ªå ´æ¥é€ <br><span class="text-sm text-gray-500 bg-gray-50 px-2 rounded">2/5(å››) çŸ³æ‰“ä¸¸å±± ä¸­å¤®å£ï¼Œå»8:30 å›17:00</span></span></label>
            </div>
        </section>

        <section id="feb1-meeting" class="tab-content hidden">
            <div class="section-header">
                <h2 class="text-xl font-bold">ğŸ“… 2/1 (æ—¥) å‡ºç™¼å‰é›†åˆ</h2>
                <p class="text-sm opacity-80 mt-1">æ¡ƒåœ’æ©Ÿå ´ T1</p>
            </div>
            
            <div class="card border-l-8 border-l-indigo-600" id="t-0201-2130">
                <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                <div class="flex flex-col items-center py-6">
                    <div class="time-pill-header" onclick="setAnchor('t-0201-2130')">2/1(æ—¥) 21:30</div>
                    <h2 class="text-2xl font-bold mt-4 text-center">æ¡ƒåœ’æ©Ÿå ´ ç¬¬ä¸€èˆªå»ˆ (T1) é›†åˆ</h2>
                    <p class="text-gray-500 mt-2">è«‹å„ä½è‡ªè¡Œå®‰æ’å‰å¾€</p>
                    <div class="mt-8 bg-blue-50 text-blue-800 px-6 py-4 rounded-xl text-center shadow-sm">
                        <i class="fa-solid fa-passport text-2xl mb-2"></i><br>
                        å‡ºç™¼å‰æœ€å¾Œç¢ºèª<br><strong>è­·ç…§</strong> èˆ‡ <strong>æ‰‹æ©Ÿ</strong>
                    </div>
                </div>
            </div>
        </section>

        <section id="feb2" class="tab-content hidden">
            <div class="bg-gradient-to-br from-blue-700 to-indigo-800 p-6 rounded-2xl mb-10 shadow-xl text-white relative overflow-hidden">
                <div class="relative z-10">
                    <h2 class="text-2xl font-bold">ğŸ“… 2/2 (ä¸€) ç´…çœ¼ç‰¹æ”»</h2>
                    <p class="opacity-90 mt-1 text-lg">ç›´è¡è¶Šå¾Œæ¹¯æ¾¤æ»‘é›ªå»</p>
                    
                    <div class="mt-6 bg-white/10 p-4 rounded-xl backdrop-blur-md border border-white/10">
                        <div class="flex justify-between items-center">
                            <div class="text-center">
                                <div class="text-3xl font-bold tracking-wider">00:10</div>
                                <div class="text-xs opacity-75 mt-1">TPE æ¡ƒåœ’</div>
                            </div>
                            <div class="flex-1 text-center px-4">
                                <i class="fa-solid fa-plane text-xl opacity-80"></i>
                                <div class="text-xs mt-2 font-mono">å°ç£è™èˆª IT216</div>
                            </div>
                            <div class="text-center">
                                <div class="text-3xl font-bold tracking-wider">04:00</div>
                                <div class="text-xs opacity-75 mt-1">HND ç¾½ç”°</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="absolute -right-6 -bottom-6 text-9xl text-white opacity-5 rotate-12"><i class="fa-regular fa-snowflake"></i></div>
            </div>

            <div class="timeline-container">
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card" id="t-0202-0400">
                        <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill-header" onclick="setAnchor('t-0202-0400')">04:00 - 04:30</div>
                        <h3 class="text-xl font-bold mt-2 mb-4">æ©Ÿå ´é€šé—œï¼šå…¥å¢ƒå¯©æŸ¥èˆ‡è¡Œæ</h3>
                        
                        <ul class="list-disc pl-5 mt-2 text-gray-700 content-list">
                            <li><span class="time-badge">04:00 - 04:20</span> å…¥å¢ƒå¯©æŸ¥</li>
                            <li><span class="time-badge">04:20 - 04:30</span> æŠµé” HND ç¬¬ä¸‰èˆªå»ˆ 2F å…¥å¢ƒå¤§å»³å–è¡Œæ</li>
                        </ul>

                        <div class="mt-6 bg-red-50 border-l-4 border-red-500 p-4 rounded-r-lg text-gray-700 shadow-sm">
                            <strong class="text-red-700 block mb-2 text-lg"><i class="fa-solid fa-triangle-exclamation mr-1"></i> ç·Šæ€¥åˆ†æµç­–ç•¥ (è‹¥ 04:30 å°šæœªæ‹¿åˆ°è¡Œæ)</strong>
                            <p class="mb-2">è‹¥æ™‚é–“ç·Šè¿«ï¼Œè«‹ç«‹åˆ»åˆ†çµ„è¡Œå‹•ï¼š</p>
                            <ol class="list-decimal pl-5 space-y-2">
                                <li><strong>è¡Œæçµ„ (5ç”·)ï¼š</strong> ç•™åœ¨è½‰ç›¤è™•ç­‰å¾…ä¸¦é ˜å–æ‰€æœ‰è¡Œæã€‚</li>
                                <li><strong>æ¡è³¼çµ„ (4å¥³)ï¼š</strong> å…ˆå»ä¸‹ä¸€ç«™(Lawson)æ¡è³¼ï¼Œè²·å®Œç›´æ¥åˆ°é›†åˆé»æœƒåˆã€‚</li>
                            </ol>
                            <div class="mt-4 pt-3 border-t border-red-200">
                                <strong>ğŸ“ æœ€çµ‚é›†åˆé»ï¼š</strong> ç¬¬ä¸‰èˆªå»ˆ2F ç¾½ç”°æ©Ÿå ´è§€å…‰è³‡è¨Šä¸­å¿ƒ
                                <a href="https://maps.app.goo.gl/diAxNd1oA83QAMbr7" target="_blank" class="map-btn bg-white border-red-200 text-red-700 hover:bg-red-50"><i class="fa-solid fa-location-dot"></i> é›†åˆé»åœ°åœ–</a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card" id="t-0202-0435">
                        <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill-header" onclick="setAnchor('t-0202-0435')">04:35 - 04:55</div>
                        <h3 class="text-xl font-bold mt-2 mb-4"><i class="fa-solid fa-store text-blue-600 mr-2"></i>Lawson æ¡è³¼æˆ°å‚™ç³§é£Ÿ</h3>
                        
                        <p class="text-gray-600 mb-3 text-lg"><strong>åœç•™ 20 åˆ†é˜</strong>ã€‚ç›®æ¨™ï¼šæ—©é¤ + æœªä¾†å¹¾æ—¥åœ¨é›ªåœ‹çš„æˆ°å‚™ç³§é£Ÿã€‚</p>
                        <div class="bg-gray-50 p-4 rounded-lg text-sm mb-4 border border-gray-100">
                            <p class="mb-2"><strong>ğŸ“ åœ°é»ï¼š</strong> ãƒ­ãƒ¼ã‚½ãƒ³ ç¾½ç”°ç©ºæ¸¯ç¬¬ï¼“ã‚¿ãƒ¼ãƒŸãƒŠãƒ«åº— 1F</p>
                            <p class="mb-2"><strong>å‹•ç·š 1 (å…¥å¢ƒå¾Œ)ï¼š</strong> èµ°é€²å…¥å¢ƒå¤§å»³å³åˆ»ã€Œå³è½‰ã€æ­é›»æ¢¯ä¸‹æ¨“ã€‚</p>
                            <p><strong>å‹•ç·š 2 (å¾é›†åˆé»)ï¼š</strong> è§€å…‰è³‡è¨Šä¸­å¿ƒã€Œæ­£å¾Œæ–¹ã€é›»æ¢¯ä¸‹æ¨“ã€‚</p>
                        </div>
                        <div class="flex flex-col sm:flex-row gap-3">
                            <a href="https://maps.app.goo.gl/yjEx2yYdytEBU6o17" target="_blank" class="map-btn flex-1"><i class="fa-solid fa-map-pin"></i> Google Maps</a>
                            <a href="https://platinumaps.jp/d/haneda?culture=zh-tw&c=all&gm=121&floor=2F&area=9&list=1&dir=1&src=spot-367393&dst=spot-352989" target="_blank" class="map-btn flex-1 bg-indigo-50 text-indigo-700 border-indigo-200 hover:bg-indigo-100"><i class="fa-solid fa-location-arrow"></i> ç·šä¸Šè·¯ç·šå°èˆª (3F -> 1F)</a>
                        </div>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card" id="t-0202-0455">
                        <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill-header" onclick="setAnchor('t-0202-0455')">04:55 - 05:00</div>
                        <h3 class="text-xl font-bold mt-2 mb-4 text-red-600"><i class="fa-solid fa-flag-checkered mr-2"></i>é›†åˆæº–å‚™å‰å¾€æœˆå°</h3>
                        <p class="text-gray-700 text-lg mb-3">å…¨å“¡åˆ°é½Šå¾Œï¼Œå‰å¾€ <strong>3Fã€Œ2è™Ÿæœˆå°ã€</strong> å€™è»Šã€‚</p>

                        <button class="route-btn route-btn-sm" onclick="openRouteModal('modal-monorail-seat')">
                            <i class="fa-solid fa-train"></i> ğŸ“– æŸ¥çœ‹å–®è»Œé›»è»Šã€Œè»Šå»‚æ”»ç•¥ã€
                        </button>

                         <div id="modal-monorail-seat" class="hidden">
                            <h3 class="text-2xl font-bold mb-4">å–®è»Œé›»è»Šè»Šå»‚ç­–ç•¥</h3>
                            <p class="text-lg text-gray-700 mb-4">åã€Œä¸­é–“ååŒ—ã€çš„è»Šå»‚ä½ç½®ï¼Œé è¿‘æ¿±æ¾ç”ºç«™çš„å‡ºå£ï¼Œæ–¹ä¾¿è½‰ä¹˜ã€‚</p>
                            <img src="https://hackmd.io/_uploads/ByPI29JSbx.png" class="content-img" alt="è»Šå»‚ä½ç½®å»ºè­°">
                        </div>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card" id="t-0202-0509">
                        <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill-header" onclick="setAnchor('t-0202-0509')">05:09 - 05:25</div>
                        <h3 class="text-xl font-bold mt-2 mb-4">æ­ä¹˜ æ±äº¬å–®è»Œé›»è»Š</h3>
                        <div class="text-lg text-gray-700 mb-2">å¾€ <strong>æ¿±æ¾ç”º (Hamamatsucho)</strong></div>
                        <div class="text-sm text-gray-600 mt-2 bg-green-50 inline-block px-3 py-1 rounded border border-green-100">
                            æŠµé”å¾Œå¾ 5F å‰å¾€ <strong>3F ä¸­å¤®å£</strong> è½‰è»Š
                        </div>

                        <button class="route-btn route-btn-sm" onclick="openRouteModal('modal-hamamatsucho')">
                            <i class="fa-solid fa-person-walking-arrow-right"></i> ğŸ“– æŸ¥çœ‹ã€Œæ¿±æ¾ç”ºã€è½‰ä¹˜æŒ‡å¼•
                        </button>
                        
                        <div id="modal-hamamatsucho" class="hidden">
                            <h3 class="text-2xl font-bold mb-4">æ¿±æ¾ç”ºè½‰ä¹˜æŒ‡å¼•</h3>
                            <p class="mb-4 text-gray-700">æŠµé”å¾Œå¾ 5F å‰å¾€ <strong>3F ä¸­å¤®å£</strong> è½‰è»Šã€‚</p>
                            <img src="https://hackmd.io/_uploads/r1LvNqJHZe.png" class="content-img" alt="è½‰ä¹˜æŒ‡å¼•1">
                            <img src="https://hackmd.io/_uploads/HyC1bc1SWe.png" class="content-img" alt="è½‰ä¹˜æŒ‡å¼•2">
                        </div>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card" id="t-0202-0533">
                        <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill-header" onclick="setAnchor('t-0202-0533')">05:33 - 05:40</div>
                        <h3 class="text-xl font-bold mt-2 mb-4">è½‰ä¹˜ JR äº¬æ¿±æ±åŒ—ç·š</h3>
                        <div class="text-lg text-gray-700">æ¿±æ¾ç”º â” <strong>æ±äº¬è»Šç«™</strong> (ç´„7åˆ†)</div>
                        <div class="text-sm text-gray-500 mt-2">æ–¹å‘ï¼šä¸Šé‡ã€å¤§å®®æ–¹å‘</div>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card" id="t-0202-0540">
                        <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill-header" onclick="setAnchor('t-0202-0540')">05:40 - 06:08</div>
                        <h3 class="text-xl font-bold mt-2 mb-4 text-red-700">æ±äº¬è»Šç«™å¤§ç§»å‹• & è£œçµ¦</h3>
                        
                        <div class="space-y-6">
                            <div class="bg-yellow-50 p-4 rounded-lg border-l-4 border-yellow-400">
                                <h4 class="font-bold text-yellow-800 text-lg mb-2">ğŸŸ¡ è£œçµ¦ï¼šå…ˆå» NewDays (ç«™å…§)</h4>
                                <p class="text-gray-700 mb-2">åˆ©ç”¨è½‰ä¹˜ç©ºæª”ï¼Œå…ˆå»ç«™å…§ NewDays è£œé½Š Lawson æ²’è²·åˆ°çš„æ±è¥¿ã€‚</p>
                                <button class="route-btn route-btn-sm bg-white border-yellow-300 text-yellow-700 mt-1" onclick="openRouteModal('modal-newdays')">
                                    <i class="fa-solid fa-basket-shopping"></i> ğŸ“– æŸ¥çœ‹ NewDays ä½ç½®
                                </button>
                            </div>

                            <div class="bg-red-50 p-4 rounded-lg border-l-4 border-red-500">
                                <h4 class="font-bold text-red-800 text-lg mb-2">ğŸ”´ ç§»å‹•ï¼šJR åœ¨ä¾†ç·š â” æ–°å¹¹ç·š</h4>
                                <p class="text-gray-700 mb-2">å¾ã€Œ3è™Ÿæœˆå°ã€ç§»å‹•åˆ°æ–°å¹¹ç·šæœˆå°ã€Œ20-23æœˆå°ã€ã€‚</p>
                                <button class="route-btn route-btn-sm bg-white border-red-200 text-red-700 mt-1" onclick="openRouteModal('modal-tokyo-map')">
                                    <i class="fa-solid fa-map"></i> ğŸ“– æŸ¥çœ‹ã€Œæ±äº¬è»Šç«™ã€å¹³é¢è·¯ç·šåœ–
                                </button>
                            </div>
                        </div>

                        <div id="modal-newdays" class="hidden">
                             <h3 class="text-2xl font-bold mb-4">ç«™å…§è£œçµ¦ NewDays</h3>
                            <p class="text-gray-700 mb-4">è½‰ä¹˜æ™‚é–“é‚„ç®—å……è£•ï¼Œå¯å»ç«™å…§çš„ NewDays è£œé½Š Lawson æ²’è²·åˆ°çš„æ±è¥¿ã€‚</p>
                            <a href="https://maps.app.goo.gl/HbEaUckHc3HYLoZm8" target="_blank" class="map-btn w-auto inline-flex mb-2">Google Maps</a>
                            <img src="https://hackmd.io/_uploads/HkdeucJH-g.jpg" class="content-img" alt="NewDays">
                        </div>

                        <div id="modal-tokyo-map" class="hidden">
                            <h3 class="text-2xl font-bold mb-4">æ±äº¬è»Šç«™å¹³é¢è·¯ç·šåœ–</h3>
                            <p class="mb-4 text-red-500 font-bold bg-red-50 p-2 rounded">è«‹æŒ‰åœ–ä¸Šè·¯ç·šç§»å‹•ï¼š</p>
                            <img src="https://hackmd.io/_uploads/BkoovYkBWx.jpg" class="content-img" alt="è·¯ç·šåœ–1">
                            <img src="https://hackmd.io/_uploads/B1jjvtkHWx.jpg" class="content-img" alt="è·¯ç·šåœ–2">
                            <img src="https://hackmd.io/_uploads/HksoPY1HWl.jpg" class="content-img" alt="è·¯ç·šåœ–3">
                            <img src="https://hackmd.io/_uploads/rJioDF1SZx.jpg" class="content-img" alt="è·¯ç·šåœ–4">
                        </div>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card" id="t-0202-0608">
                         <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill-header" onclick="setAnchor('t-0202-0608')">06:08 - 09:15</div>
                        <h3 class="text-xl font-bold mt-2 mb-4">æ–°å¹¹ç·š & é›ªå…·ç§Ÿè³ƒ</h3>
                        <ul class="space-y-6 mt-4 text-gray-700">
                            <li class="pl-4 border-l-4 border-gray-200">
                                <strong class="text-lg block mb-1"><span class="time-badge">06:08 - 07:22</span> æ­ä¹˜æ–°å¹¹ç·š (Toki / Tanigawa)</strong>
                                <p class="text-gray-500">æ±äº¬ â” è¶Šå¾Œæ¹¯æ¾¤ (è»Šç¨‹ç´„ 1å°æ™‚14åˆ†ï¼Œè£œçœ æ™‚é–“)ã€‚</p>
                            </li>
                            <li class="pl-4 border-l-4 border-orange-200">
                                <strong class="text-lg block mb-1"><span class="time-badge">08:00 - 09:00</span> é’é”é›ªå…· (æ±å£åº—)</strong>
                                <div class="bg-orange-50 p-3 rounded text-sm text-gray-700 space-y-1 mt-2">
                                    <p><strong>ä»»å‹™ï¼š</strong> ç§Ÿé›ªå…·ã€æ›´æ›é›ªè¡£ã€‚</p>
                                    <p><strong>ç‰¹è‰²ï¼š</strong> å…¨æ–°é–‹å¹•ï¼Œæä¾›å…¨æ–° Burton åç‰Œé›ªå…·ã€‚</p>
                                    <p><strong>åƒ¹æ ¼ï¼š</strong> æ¿é‹åªæ¯”è¥¿å£åº—è²´ 150/å¤© (CPå€¼é«˜)ã€‚</p>
                                    <p class="text-red-600 font-bold mt-2"><i class="fa-solid fa-triangle-exclamation"></i> âš ï¸ æ„›æƒœå…¬ç‰©ï¼šå› ç‚ºæ˜¯å…¨æ–°é›ªå…·ï¼Œè«‹å¤§å®¶å‹™å¿…å°å¿ƒä½¿ç”¨ï¼Œé¿å…åˆ®å‚·é›ªæ¿ã€‚</p>
                                </div>
                            </li>
                            <li class="pl-4 border-l-4 border-gray-200">
                                <strong class="text-lg block mb-1"><span class="time-badge">09:00 - 09:15</span> ç§»å‹•è‡³é£¯åº—</strong>
                                <p class="mb-1">æ­ä¹˜é’é”å°ˆè»Šé€å›é£¯åº— (Chenda International Hotel çŸ³æ‰“BASE)ã€‚</p>
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card" id="t-0202-0915">
                        <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill-header" onclick="setAnchor('t-0202-0915')">09:15 - 09:30</div>
                        <h3 class="text-xl font-bold mt-2 mb-4">å¯„æ”¾è¡Œæ & ç­‰å¾…æ¥é§</h3>
                        <div class="space-y-3 text-gray-700 text-lg">
                            <p><strong>å‹•ä½œï¼š</strong> å¯„æ”¾è¡Œæï¼Œæº–å‚™è¼•è£å»æ»‘é›ªã€‚</p>
                            <p class="text-red-600 font-bold bg-red-50 p-3 rounded text-base"><i class="fa-solid fa-box mr-2"></i> âš ï¸ æ”¶ç´æé†’ï¼šæ¯å€‹äººè¦æº–å‚™è¢‹å­æ”¶ç´è‡ªå·±çš„é‹å­ï¼Œä¸¦æ”¾åˆ°è¡Œæç®±ä¸­ã€‚</p>
                            <p class="text-sm text-gray-500 mt-2">ç­‰å¾… 09:30 æ¥é§è»Šå‰å¾€å²©åŸé›ªå ´ã€‚</p>
                        </div>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card" id="t-0202-0930">
                        <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill-header" onclick="setAnchor('t-0202-0930')">09:30 - 17:00</div>
                        <h3 class="text-xl font-bold mt-2 mb-4">ğŸ¿ æ»‘é›ªè¡Œç¨‹ï¼šå²©åŸæ»‘é›ªå ´</h3>
                        <p class="text-gray-600 mb-6 text-lg">å¯¬å»£å¹³ç·©ï¼Œéå¸¸é©åˆé¦–æ—¥æš–èº«æˆ–åˆå­¸è€…ã€‚</p>
                        
                        <div class="bg-yellow-50 border border-yellow-200 p-5 rounded-xl shadow-sm">
                            <h4 class="font-bold text-yellow-800 text-lg mb-2">
                                <i class="fa-solid fa-pizza-slice mr-2"></i>
                                <span class="time-badge bg-yellow-200 text-yellow-900">13:30</span> åˆé¤ï¼šPizzeria La locanda del pittore
                            </h4>
                            <p class="text-yellow-900 mb-1"><strong>å¿…åƒï¼š</strong> é›ªå ´å…§è¶…äººæ°£ Pizza ååº—ã€‚</p>
                            <div class="bg-white p-3 rounded border border-yellow-100 mt-2 text-yellow-800 font-bold">
                                ğŸ’¡ æ”»ç•¥ï¼šå¼·çƒˆå»ºè­°ä¸€æ—©æŠµé”é›ªå ´æ™‚ï¼Œå°±å…ˆæ´¾äººå»é¤å»³é è¨‚ä½å­ï¼Œä»¥å…ç”¨é¤æ™‚é–“æ’éšŠéä¹…ã€‚
                            </div>
                        </div>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card" id="t-0202-1700">
                        <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill-header" onclick="setAnchor('t-0202-1700')">17:00</div>
                        <h3 class="text-xl font-bold mt-2 mb-4">ğŸ¨ æ™šé–“ä¼‘æ¯</h3>
                        <ul class="list-disc pl-5 mt-2 text-gray-700 space-y-2 text-lg">
                            <li><span class="time-badge">17:00</span> æ­ä¹˜é£¯åº—å°ˆè»Šè¿”å›é£¯åº—ã€‚</li>
                            <li><strong>å…¥ä½ï¼š</strong> Chenda International Hotel çŸ³æ‰“BASEã€‚</li>
                            <li><span class="time-badge">18:30</span> é£¯åº—æ™šé¤</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <section id="feb3" class="tab-content hidden">
            <div class="section-header">
                <h2 class="text-xl font-bold">ğŸ“… 2/3 (äºŒ) æ»‘é›ªæ—¥ï¼šçŸ³æ‰“ä¸¸å±±</h2>
                <p class="text-sm opacity-80 mt-1">æ–°æ½Ÿåœ°å€æœ€å»£é—Šçš„è¦–é‡</p>
            </div>

            <div class="timeline-container">
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card" id="t-0203-0830">
                         <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill-header" onclick="setAnchor('t-0203-0830')">08:30 - 17:00</div>
                        <h3 class="text-xl font-bold mt-2 mb-4">ğŸ¿ çŸ³æ‰“ä¸¸å±± (Ishiuchi Maruyama)</h3>
                        <div class="space-y-3 mt-4 text-gray-700 text-lg">
                            <p><span class="time-badge">07:30</span> é£¯åº—æ—©é¤</p>
                            <p><span class="time-badge">08:20</span> <strong>å¤§å»³é›†åˆ</strong> (å…¨è£å‚™è‘—è£å®Œç•¢)</p>
                            <p><span class="time-badge">08:30</span> æ­ä¹˜é£¯åº—å°ˆè»Šå‡ºç™¼</p>
                        </div>
                        <div class="mt-6 bg-gray-50 p-4 rounded-lg text-gray-600 border border-gray-100">
                            <strong>ç‰¹è‰²ï¼š</strong> æ“æœ‰æ–°æ½Ÿåœ°å€æœ€å»£é—Šçš„è¦–é‡èˆ‡è±å¯Œçš„åœ°å½¢ï¼Œé©åˆç·´ç¿’èˆ‡æ¬£è³é¢¨æ™¯ã€‚
                        </div>
                    </div>
                </div>
                <div class="timeline-item">
                     <div class="timeline-dot"></div>
                    <div class="card" id="t-0203-1700">
                        <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill-header" onclick="setAnchor('t-0203-1700')">17:00</div>
                        <h3 class="text-lg font-bold mt-2 mb-2">æ™šé–“ä¼‘æ¯</h3>
                        <p class="text-gray-600">æ­å°ˆè»Šè¿”å›é£¯åº—ã€‚<br><span class="time-badge">18:30</span> é£¯åº—æ™šé¤ã€‚</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="feb4" class="tab-content hidden">
            <div class="section-header">
                <h2 class="text-xl font-bold">ğŸ“… 2/4 (ä¸‰) æ»‘é›ªæ—¥ï¼šç¥ç«‹é«˜åŸ</h2>
                <p class="text-sm opacity-80 mt-1">é›ªå ´å¤œåº—ï¼Œåœ°å½¢è±å¯Œ</p>
            </div>

            <div class="timeline-container">
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card" id="t-0204-0830">
                        <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill-header" onclick="setAnchor('t-0204-0830')">08:30 - 16:30</div>
                        <h3 class="text-xl font-bold mt-2 mb-4">ğŸ¿ ç¥ç«‹é«˜åŸ (Kandatsu)</h3>
                         <div class="space-y-3 mt-4 text-gray-700 text-lg">
                            <p><span class="time-badge">07:30</span> é£¯åº—æ—©é¤</p>
                            <p><span class="time-badge">08:20</span> å¤§å»³é›†åˆ</p>
                            <p><span class="time-badge">08:30</span> æ­ä¹˜é£¯åº—å°ˆè»Šå‡ºç™¼</p>
                        </div>
                        <div class="mt-6 p-4 rounded-lg border border-orange-200 bg-orange-50 text-orange-800">
                            <strong>âš ï¸ æ³¨æ„ï¼š</strong> æ¯”çŸ³æ‰“ä¸¸å±±æ—©åŠå°æ™‚é—œé–€ (<span class="font-bold">16:30</span>)
                        </div>
                        <p class="mt-4 text-gray-500 text-sm">ç‰¹è‰²ï¼šè™Ÿç¨±ã€Œé›ªå ´å¤œåº—ã€ï¼Œæ·±å—å¹´è¼•äººå–œæ„›ï¼Œåœ°å½¢é›†ä¸­ä¸”å¯Œæœ‰è¶£å‘³æ€§ã€‚</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card" id="t-0204-1700">
                        <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill-header" onclick="setAnchor('t-0204-1700')">17:00</div>
                        <h3 class="text-lg font-bold mt-2 mb-2">æ™šé–“ä¼‘æ¯</h3>
                        <p class="text-gray-600">æ­å°ˆè»Šè¿”å›é£¯åº—ã€‚<br><span class="time-badge">18:30</span> é£¯åº—æ™šé¤ã€‚</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="feb5" class="tab-content hidden">
            <div class="section-header">
                <h2 class="text-xl font-bold">ğŸ“… 2/5 (å››) æ»‘é›ªæœ€çµ‚æ—¥</h2>
                <p class="text-sm opacity-80 mt-1">æœ€å¾Œè¡åˆº & é›ªå…·æ­¸é‚„</p>
            </div>

            <div class="timeline-container">
                 <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card" id="t-0205-0830">
                        <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill-header" onclick="setAnchor('t-0205-0830')">08:30 - 17:00</div>
                        <h3 class="text-xl font-bold mt-2 mb-4">ğŸ¿ çŸ³æ‰“ä¸¸å±± (æœ€çµ‚è¡åˆº)</h3>
                        <div class="space-y-3 mt-4 text-gray-700 text-lg">
                            <p><span class="time-badge">07:30</span> é£¯åº—æ—©é¤</p>
                            <p><span class="time-badge">08:20</span> å¤§å»³é›†åˆ</p>
                            <p><span class="time-badge">08:30</span> æ­ä¹˜é£¯åº—å°ˆè»Šå‡ºç™¼</p>
                        </div>
                        <p class="mt-4 text-gray-600">ç›®æ¨™ï¼šæœ€å¾Œä¸€å¤©è¡åˆºï¼ŒæŠŠæ¡æ™‚é–“äº«å—æ–°æ½Ÿçš„ç²‰é›ªã€‚</p>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card border-l-4 border-l-red-500" id="t-0205-1700">
                        <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill-header" onclick="setAnchor('t-0205-1700')">17:00 - 18:30</div>
                        <h3 class="text-2xl font-bold text-red-700 mt-2 mb-4">ğŸ”„ æ’¤æ”¶èˆ‡æ­¸é‚„ (é—œéµæµç¨‹)</h3>
                        <div class="mt-4">
                            <div class="font-bold text-xl text-red-600 mb-4 bg-red-50 p-2 inline-block rounded">ğŸ›‘ 18:00 æ­¸é‚„ Deadline</div>
                            <ol class="list-decimal pl-6 space-y-3 text-gray-800 text-lg">
                                <li>æ¸…æ½”ä¸¦æ•´ç†ç§Ÿå€Ÿçš„è£å‚™ã€‚</li>
                                <li><strong>ğŸ“¸ æ‹ç…§å­˜è­‰</strong> <span class="text-sm text-gray-500 block pl-1">(æ­¸é‚„æ™‚è«‹å‹™å¿…æ‹ç…§ï¼Œç¢ºèªè£å‚™ç„¡æå£ã€ç„¡éºæ¼ï¼Œä¿éšœè‡ªèº«æ¬Šç›Š)ã€‚</span></li>
                                <li>å®Œæˆæ­¸é‚„æ‰‹çºŒã€‚</li>
                            </ol>
                            <p class="mt-6 pt-4 border-t border-gray-200 font-bold text-indigo-700 text-xl text-center">ğŸ‰ <span class="time-badge text-lg">18:30</span> é£¯åº—æ™šé¤ (æ…¶åŠŸå®´ï¼)</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="feb6" class="tab-content hidden">
            <div class="section-header">
                <h2 class="text-xl font-bold">ğŸ“… 2/6 (äº”) ç§»å‹•æ—¥</h2>
                <p class="text-sm opacity-80 mt-1">è¶Šå¾Œæ¹¯æ¾¤ â” æ±äº¬æ–°å®¿ â” å…­æœ¬æœ¨</p>
            </div>
            
            <div class="timeline-container">
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card" id="t-0206-0800">
                        <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill-header" onclick="setAnchor('t-0206-0800')">08:00 - 12:30</div>
                        <h3 class="text-xl font-bold mt-2 mb-4">æ–°å¹¹ç·šç§»å‹•ï¼šé›ªåœ‹å›æ­¸æ±äº¬</h3>
                        <ul class="space-y-4 mt-4 text-gray-700 text-lg">
                            <li><span class="time-badge">08:00</span> é£¯åº—æ—©é¤</li>
                            <li class="bg-red-50 p-2 rounded -ml-2"><span class="time-badge">09:45</span> <strong>Check-out (å¤§å»³é›†åˆ)</strong> <br><span class="text-red-500 text-sm font-bold pl-1">âš ï¸ é£¯åº—æ¥é§è»Šæ™‚é–“å›ºå®šï¼Œè«‹å‹¿é²åˆ°ã€‚</span></li>
                            <li><span class="time-badge">10:00</span> æ­ä¹˜é£¯åº—æ¥é§è»Šå‰å¾€ã€Œè¶Šå¾Œæ¹¯æ¾¤è»Šç«™ã€ã€‚</li>
                            <li class="bg-blue-50 p-2 rounded -ml-2"><span class="time-badge">10:33</span> <strong>ğŸš„ æ­ä¹˜æ–°å¹¹ç·š (Toki 314è™Ÿ)</strong> <br><span class="text-sm text-gray-500 pl-1">è·¯ç·šï¼šè¶Šå¾Œæ¹¯æ¾¤ â” ä¸Šé‡</span></li>
                            <li><span class="time-badge">11:54</span> æŠµé” <strong>ä¸Šé‡è»Šç«™</strong>ã€‚</li>
                            <li><span class="time-badge">12:30</span> æŠµé”é£¯åº— <strong>Route-Inn Asakusabashi (æ·ºè‰æ©‹)</strong>ã€‚<br><span class="text-sm text-gray-500 pl-1">å‹•ä½œï¼šå…ˆå¯„æ”¾è¡Œæï¼Œè¼•è£å‡ºé–€ã€‚</span></li>
                        </ul>
                         <a href="https://www.google.com/maps/search/?api=1&query=Hotel+Route-Inn+Grand+Tokyo+Asakusabashi" target="_blank" class="map-btn"><i class="fa-solid fa-hotel"></i> Route-Inn Asakusabashi åœ°åœ–</a>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card" id="t-0206-1250">
                        <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                         <div class="time-pill-header" onclick="setAnchor('t-0206-1250')">12:50 - 14:30</div>
                        <h3 class="text-xl font-bold mt-2 mb-4">ğŸ— åˆé¤ï¼šé³¥è‰¯å•†åº—</h3>
                        <div class="space-y-2 text-gray-700">
                            <p><strong>é¤å»³ï¼š</strong> é³¥è‰¯å•†åº— æ·ºè‰æ©‹ç«™å‰åº—</p>
                            <p><strong>ç‰¹è‰²ï¼š</strong> 24å°æ™‚ç‡Ÿæ¥­çš„é›è‚‰æ–™ç†å°ˆé–€åº—ï¼Œæ‹›ç‰Œæ˜¯æ‰‹ç¾½å…ˆï¼ˆç‚¸é›ç¿…ï¼‰èˆ‡åˆé–“å®šé£Ÿã€‚</p>
                            <p><strong>ä½ç½®ï¼š</strong> å°±åœ¨æ·ºè‰æ©‹ç«™æ—é‚Šï¼Œåƒå®Œæ–¹ä¾¿æ­è»Šã€‚</p>
                        </div>
                        <a href="https://www.google.com/maps/search/?api=1&query=Toriyoshi+Shoten+Asakusabashi+Ekimae" target="_blank" class="map-btn"><i class="fa-solid fa-utensils"></i> é¤å»³ä½ç½®</a>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card" id="t-0206-1430">
                         <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill-header" onclick="setAnchor('t-0206-1430')">14:30 - 17:45</div>
                        <h3 class="text-xl font-bold mt-2 mb-4">ğŸ›ï¸ æ–°å®¿æ¡è³¼ï¼šè—¥å¦ & å”å‰è¨¶å¾·</h3>
                        <p class="text-sm text-gray-500 mb-6 bg-gray-50 p-2 rounded"><strong>äº¤é€šï¼š</strong> å¾æ·ºè‰æ©‹æ­ä¹˜ã€ŒJRç¸½æ­¦ç·šã€ç›´é”æ–°å®¿ (ç´„ 20 åˆ†é˜)ã€‚</p>

                        <div class="space-y-6">
                            <div class="border-b pb-4">
                                <h4 class="font-bold text-blue-700 text-lg mb-2">1. Sun Drug æ–°å®¿ä¸­å¤®æ±å£åº— (é¦–é¸)</h4>
                                <p class="text-gray-600 mb-2">ä½ç½®æœ€æ–¹ä¾¿ï¼Œåƒ¹æ ¼é€šå¸¸æœ€å…·ç«¶çˆ­åŠ›ã€‚</p>
                                <a href="https://www.google.com/maps/search/?api=1&query=Sundrug+Shinjuku+Chuo+Higashi-guchi" target="_blank" class="map-btn w-auto inline-flex py-1 px-3 text-sm">Google Maps</a>
                            </div>
                            
                            <button class="route-btn" onclick="openRouteModal('modal-shinjuku-shopping')">
                                <i class="fa-solid fa-list-ul"></i> ğŸ“– æŸ¥çœ‹å®Œæ•´è—¥å¦åº—æˆ°ç•¥æ¸…å–®
                            </button>
                            
                            <div id="modal-shinjuku-shopping" class="hidden">
                                <h3 class="text-2xl font-bold mb-6">è—¥å¦åº—æˆ°ç•¥ (ä¾ç…§æ¨è–¦é †åº)</h3>
                                <div class="bg-blue-50 p-3 rounded mb-4 text-blue-800 text-sm">
                                    <strong>ç›®æ¨™ï¼š</strong> é–å®š Sun Drug æˆ– SUGIï¼ŒKOKUMIN ä½œç‚ºå‚™æ¡ˆã€‚
                                </div>
                                <div class="space-y-6">
                                    <div class="p-4 bg-gray-50 rounded border border-gray-200">
                                        <strong>1. Sun Drug æ–°å®¿ä¸­å¤®æ±å£åº— (é¦–é¸)</strong>
                                        <p class="text-sm text-gray-500 mt-1">3 Chome-26-2 Shinjuku</p>
                                        <p class="text-sm mt-2">ç‰¹é»ï¼šä½ç½®æœ€æ–¹ä¾¿ï¼Œåƒ¹æ ¼é€šå¸¸æœ€å…·ç«¶çˆ­åŠ›ã€‚</p>
                                        <a href="https://www.google.com/maps/search/?api=1&query=Sundrug+Shinjuku+Chuo+Higashi-guchi" target="_blank" class="map-btn py-2 text-sm bg-white">Google Maps</a>
                                    </div>
                                    <div class="p-4 bg-gray-50 rounded border border-gray-200">
                                        <strong>2. Sun Drug æ–°å®¿é€šåº— (å‚™æ¡ˆ)</strong>
                                        <p class="text-sm text-gray-500 mt-1">3 Chome-17-2 Shinjuku</p>
                                        <p class="text-sm mt-2">ç‰¹é»ï¼šè©•åƒ¹ç¨ä½ï¼Œä½†åº—é¢çœ‹èµ·ä¾†è¼ƒå¤§ã€‚</p>
                                        <a href="https://www.google.com/maps/search/?api=1&query=Sundrug+Shinjuku+Dori" target="_blank" class="map-btn py-2 text-sm bg-white">Google Maps</a>
                                    </div>
                                    <div class="p-4 bg-gray-50 rounded border border-gray-200">
                                        <strong>3. SUGI è—¥å±€ æ–°å®¿ä¸‰ä¸ç›®åº—</strong>
                                        <p class="text-sm text-gray-500 mt-1">3 Chome-5-6 Shinjuku</p>
                                        <p class="text-sm mt-2">ç‰¹é»ï¼š2025å¹´å»éï¼Œåº—é¢å¾ˆå¤§ï¼Œè²¨å…¨ï¼Œä½†è·é›¢è»Šç«™ç¨é ï¼Œè¦èµ°ä¸€é»è·¯ã€‚</p>
                                        <a href="https://www.google.com/maps/search/?api=1&query=Sugi+Drug+Shinjuku+3-chome" target="_blank" class="map-btn py-2 text-sm bg-white">Google Maps</a>
                                    </div>
                                    <div class="p-4 bg-gray-50 rounded border border-gray-200">
                                        <strong>4. KoKuMiN Drug (æ–°å®¿åœ°ä¸‹è¡— B1)</strong>
                                        <p class="text-sm text-gray-500 mt-1">æ–°å®¿ Metro Promenade åœ°ä¸‹è¡— B1</p>
                                        <p class="text-sm mt-2">ç‰¹é»ï¼šä½æ–¼åœ°ä¸‹é€£é€šé“ï¼Œä¸æ€•é¢¨å¹é›¨æ·‹ã€‚è²¨ç‰©é½Šå…¨ï¼Œé©åˆè£œé½Šç¼ºè²¨å•†å“ã€‚</p>
                                        <a href="https://www.google.com/maps/search/?api=1&query=KoKuMiN+Drug+Shinjuku+Metro+Pia" target="_blank" class="map-btn py-2 text-sm bg-white">Google Maps</a>
                                    </div>
                                </div>
                            </div>

                            <div class="pt-2">
                                <h4 class="font-bold text-yellow-600 text-lg mb-2">ğŸ§ å”å‰è¨¶å¾· (æ­Œèˆä¼ç”º)</h4>
                                <p class="text-gray-600 mb-2">æœ€å¾Œè£œè²¨ã€‚ä½æ–¼æ­Œèˆä¼ç”ºä¸€ç•ªè¡—å…¥å£é™„è¿‘ï¼Œå“¥å‰æ‹‰é ­åƒæ—ã€‚</p>
                                <p class="text-red-500 text-sm font-bold bg-red-50 p-2 rounded">âš ï¸ æ³¨æ„ï¼šäººæ½®æ¥µåº¦æ“æ“ ï¼Œçµå¸³èˆ‡é€€ç¨…å¯èƒ½éœ€è¦æ’éšŠï¼Œè«‹é ç•™æ™‚é–“ã€‚</p>
                                <a href="https://www.google.com/maps/search/?api=1&query=Don+Quijote+Shinjuku+Kabukicho" target="_blank" class="map-btn py-2 text-sm bg-yellow-50 text-yellow-800 border-yellow-200 hover:bg-yellow-100">Google Maps</a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card" id="t-0206-1800">
                         <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill-header" onclick="setAnchor('t-0206-1800')">18:00 - 20:00</div>
                        <h3 class="text-xl font-bold mt-2 mb-4">ğŸ¥˜ æ™šé¤ï¼šMo-Mo-Paradise æœ¬åº—</h3>
                        <div class="space-y-2 text-gray-700">
                            <p><strong>é¤å»³ï¼š</strong> Mo-Mo-Paradise æ­Œèˆä¼ç”ºæœ¬åº—</p>
                            <p><strong>ä½ç½®ï¼š</strong> Humax Pavilion å¤§æ¨“ <strong>8æ¨“</strong>ã€‚</p>
                            <p><strong>é ç®—ï¼š</strong> ç´„ NT$ 1,610 /äººã€‚</p>
                            <p><strong>ç‰¹è‰²ï¼š</strong> å£½å–œç‡’åƒåˆ°é£½å§‹ç¥–çš„ã€Œæœ¬åº—ã€ï¼Œæœå‹™èˆ‡è‚‰è³ªçš†æœ‰æ°´æº–ã€‚</p>
                        </div>
                        <a href="https://www.google.com/maps/search/?api=1&query=Mo-Mo-Paradise+Kabukicho+Honten" target="_blank" class="map-btn"><i class="fa-solid fa-utensils"></i> é¤å»³ä½ç½®</a>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card" id="t-0206-2030">
                        <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill-header" onclick="setAnchor('t-0206-2030')">20:30 - 22:30</div>
                        <h3 class="text-xl font-bold mt-2 mb-4">ğŸŒƒ å…­æœ¬æœ¨ï¼šæ«¸å‚é€š (Keyakizaka) å†¬æ—¥é»ç‡ˆ</h3>
                        <p class="text-indigo-600 font-bold mb-4 bg-indigo-50 p-2 rounded inline-block">ğŸ‰ å®˜æ–¹ç¢ºèªæœ‰é»ç‡ˆæ´»å‹•ï¼(è‡³2026/2/22)</p>
                        <ul class="text-gray-700 text-lg space-y-3">
                            <li><span class="time-badge">20:30</span> æŠµé”æ–°å®¿ç«™ï¼Œæ­ä¹˜ã€Œéƒ½ç‡Ÿå¤§æ±Ÿæˆ¶ç·šã€å‰å¾€å…­æœ¬æœ¨ (ç´„ 15 åˆ†é˜)ã€‚</li>
                            <li><span class="time-badge">21:10</span> æŠµé” <strong>å…­æœ¬æœ¨æ«¸å‚é€š</strong>ã€‚</li>
                            <li><strong>çœ‹é»ï¼š</strong> è‘—åçš„ã€ŒSNOW & BLUEã€è—ç™½ç‡ˆé£¾å»¶çºŒè‡³ 2 æœˆï¼Œæ­é…æ­£ä¸­å¤®çš„æ±äº¬éµå¡”ã€‚</li>
                            <li class="bg-yellow-50 p-2 rounded"><strong>ğŸ“¸ æ‹ç…§é»ï¼š</strong> å»ºè­°ç«™åœ¨ã€Œè”¦å±‹æ›¸åº—ã€é™„è¿‘çš„å¤©æ©‹ä¸Šï¼Œå¯æ‹åˆ°è¡—é“èˆ‡æ±äº¬éµå¡”çš„å®Œç¾å°ç¨±ã€‚</li>
                            <li><span class="time-badge">22:30</span> çµæŸè¡Œç¨‹ï¼Œæ­è»Šè¿”å›é£¯åº— (æ·ºè‰æ©‹)ã€‚</li>
                        </ul>
                        <a href="https://www.google.com/maps/search/?api=1&query=Roppongi+Keyakizaka+Dori" target="_blank" class="map-btn bg-indigo-50 text-indigo-700 border-indigo-200 hover:bg-indigo-100"><i class="fa-solid fa-camera"></i> å…­æœ¬æœ¨æ«¸å‚é€š</a>
                    </div>
                </div>
            </div>
        </section>

        <section id="feb7" class="tab-content hidden">
            <div class="section-header">
                <h2 class="text-xl font-bold">ğŸ“… 2/7 (å…­) èŠ±ç«èˆ‡ä¼´æ‰‹ç¦®</h2>
                <p class="text-sm opacity-80 mt-1">ä¸Šåˆçˆ†è²·ï¼Œä¸‹åˆå¯Œå£«å±±</p>
            </div>
            
            <div class="card border-2 border-red-100" id="t-0207-0930">
                <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                <div class="time-pill-header" onclick="setAnchor('t-0207-0930')">09:30 - 11:10</div>
                <h3 class="text-xl font-bold mb-4">ğŸ›ï¸ ä¼´æ‰‹ç¦®æ¡è³¼ä½œæˆ° (å…± 100 åˆ†é˜)</h3>
                <div class="bg-red-50 text-red-800 p-4 rounded-xl mb-6 text-sm font-bold border border-red-200">
                    âš ï¸ æ ¸å¿ƒåŸå‰‡ï¼šç”±ã€Œç«™å…§ã€è²·åˆ°ã€Œç«™å¤–ã€ï¼Œåš´æ ¼æ§åˆ¶æ™‚é–“ã€‚
                    <br>11:10 å¿…é ˆæ’¤é€€å›é£¯åº—ï¼
                </div>
                
                <div class="space-y-8">
                     <div>
                        <h4 class="text-green-700 font-bold border-b border-green-200 pb-2 mb-3 text-lg">ğŸŸ¢ ç¬¬ä¸€éšæ®µï¼šç«™å…§å¿«é–ƒ <span class="time-badge">09:30 - 10:00</span></h4>
                        <p class="text-gray-500 mb-3 text-sm">ç­–ç•¥ï¼šä¸‹ç«è»Šå¾Œã€Œçµ•å°ä¸è¦å‡ºç«™ã€ï¼Œå…ˆè§£æ±ºç«™å…§é™å®šå“ã€‚</p>
                        
                        <div class="space-y-4">
                            <div class="pl-4 border-l-4 border-green-200">
                                <strong>1. NEWYORK PERFECT CHEESE</strong>
                                <a href="https://www.google.com/maps/search/?api=1&query=NEWYORK+PERFECT+CHEESE+Tokyo+Station" target="_blank" class="text-xs bg-green-50 text-green-700 px-2 py-1 rounded ml-2">åœ°åœ–</a>
                                <p class="text-sm text-gray-600 mt-1">ä½ç½®ï¼šJR æ±äº¬ç«™å…§ 1Fï¼Œå—é€šè·¯ï¼ˆé è¿‘å—å£ï¼‰ã€‚</p>
                                <p class="text-xs text-red-500 font-bold mt-1">è‹¥éšŠä¼å°¾ç«¯ç‰Œå­å¯«ã€Œè¶…é 15 åˆ†é˜ã€ï¼Œç«‹åˆ»é›†é«”æ’¤é€€ã€‚</p>
                            </div>
                             <div class="pl-4 border-l-4 border-green-200">
                                <strong>2. å–«èŒ¶åº—ã«æ‹ã—ã¦ã€‚</strong>
                                <a href="https://www.google.com/maps/search/?api=1&query=å–«èŒ¶åº—ã«æ‹ã—ã¦+æ±äº¬é§…+ã‚°ãƒ©ãƒ³ã‚¹ã‚¿" target="_blank" class="text-xs bg-green-50 text-green-700 px-2 py-1 rounded ml-2">åœ°åœ–</a>
                                <p class="text-sm text-gray-600 mt-1">ä½ç½®ï¼šJR æ±äº¬ç«™å…§ B1ï¼ŒGransta éŠ€ä¹‹éˆ´å»£å ´é›»æ¢¯æ—ã€‚</p>
                                <p class="text-xs text-gray-500 mt-1">é€šå¸¸ä¸éœ€æ’éšŠï¼Œ5 åˆ†é˜çµå¸³ã€‚</p>
                            </div>
                        </div>
                    </div>

                    <div>
                        <h4 class="text-yellow-700 font-bold border-b border-yellow-200 pb-2 mb-3 text-lg">ğŸŸ¡ ç¬¬äºŒéšæ®µï¼šå‡ºç«™æ¶é ­é¦™ <span class="time-badge">10:00 - 11:00</span></h4>
                         <p class="text-gray-500 mb-3 text-sm">å‹•ç·šï¼šå‰å¾€ã€Œå…«é‡æ´²åœ°ä¸‹ä¸­å¤®å£ã€åˆ·å¡å‡ºç«™ï¼Œç›´å¥”å¤§ä¸¸ç™¾è²¨é–€å£ã€‚</p>

                        <button class="route-btn" onclick="openRouteModal('modal-souvenir-phase2')">
                            <i class="fa-solid fa-list-ol"></i> ğŸ“– æŸ¥çœ‹ã€Œå¤§ä¸¸ç™¾è²¨ã€èˆ‡ã€ŒGift Paletteã€è³¼è²·æ¸…å–®
                        </button>
                        
                        <div id="modal-souvenir-phase2" class="hidden">
                            <h3 class="text-2xl font-bold mb-6">ç¬¬äºŒéšæ®µæ¡è³¼è©³æƒ…</h3>
                            
                            <div class="mb-8 p-4 bg-gray-50 rounded border border-gray-200">
                                <strong class="text-lg block mb-2">1. å¤§ä¸¸æ±äº¬åº— 1F (10:00 æº–æ™‚é€²å ´)</strong>
                                <a href="https://www.google.com/maps/search/?api=1&query=å¤§ä¸¸æ±äº¬åº—" target="_blank" class="map-btn w-auto inline-flex text-xs py-2 bg-white">Google Maps</a>
                                <p class="text-sm mt-3 mb-2 font-bold">è³¼è²·é †åºï¼š</p>
                                <ul class="list-decimal pl-5 space-y-2 text-sm text-gray-700">
                                    <li><strong>Sugar Butter Tree</strong> <a href="https://www.google.com/maps/search/?api=1&query=Sugar+Butter+Tree+Daimaru+Tokyo" target="_blank" class="text-blue-500 underline">åœ°åœ–</a></li>
                                    <li><strong>PRESS BUTTER SAND</strong> <a href="https://www.google.com/maps/search/?api=1&query=PRESS+BUTTER+SAND+Daimaru+Tokyo" target="_blank" class="text-blue-500 underline">åœ°åœ–</a></li>
                                    <li><strong>N.Y.C.SAND</strong> <a href="https://www.google.com/maps/search/?api=1&query=N.Y.C.SAND+Daimaru+Tokyo" target="_blank" class="text-blue-500 underline">åœ°åœ–</a><br>
                                    <span class="text-red-500 font-bold">ğŸš¨ åš´é‡è­¦å‘Šï¼š</span>é–‹é–€ç¬é–“äººæ½®æ¥µå¤šï¼Œè‹¥æ’éšŠè¶…é 15 åˆ†é˜è«‹å‹™å¿…æœæ–·æ”¾æ£„ã€‚</li>
                                </ul>
                            </div>
                            
                            <div class="p-4 bg-gray-50 rounded border border-gray-200">
                                <strong class="text-lg block mb-2">2. Tokyo Gift Palette 1F</strong>
                                <a href="https://www.google.com/maps/search/?api=1&query=Tokyo+Gift+Palette" target="_blank" class="map-btn w-auto inline-flex text-xs py-2 bg-white">Google Maps</a>
                                <p class="text-sm mt-3 text-gray-600">å°±åœ¨å¤§ä¸¸ç™¾è²¨éš”å£ã€‚æ¨è–¦å“ç‰Œï¼š</p>
                                <ul class="list-disc pl-5 space-y-2 text-sm text-gray-700 mt-2">
                                    <li><strong>Brulee Merize</strong> <a href="https://www.google.com/maps/search/?api=1&query=Brulee+Merize+Tokyo+Station" target="_blank" class="text-blue-500 underline">åœ°åœ–</a></li>
                                    <li><strong>Pista & Tokyo</strong> <a href="https://www.google.com/maps/search/?api=1&query=Pista+and+Tokyo+Tokyo+Station" target="_blank" class="text-blue-500 underline">åœ°åœ–</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                
                 <div class="mt-8 pt-4 border-t border-gray-200 flex flex-col md:flex-row justify-between items-center gap-4 bg-gray-50 p-4 rounded-xl">
                    <div class="text-center md:text-left">
                        <h4 class="font-bold text-red-600 text-lg">ğŸ”´ ç¬¬ä¸‰éšæ®µï¼š11:10 æ’¤é€€</h4>
                        <p class="text-sm text-gray-600">æº–æ™‚è·³ä¸Šé›»è»Šï¼Œæ­å¾€ã€Œç§‹è‘‰åŸã€æ–¹å‘å›æ·ºè‰æ©‹ã€‚</p>
                    </div>
                    <a href="https://maps.app.goo.gl/gaL6keTWb3YDzccM8" target="_blank" class="map-btn bg-white w-full md:w-auto text-center">ğŸ“ JR å…«é‡æ´²åŒ—å£ (åˆ·å¡é€²ç«™)</a>
                </div>
            </div>

            <div class="timeline-container mt-12">
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card" id="t-0207-1140">
                         <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill-header" onclick="setAnchor('t-0207-1140')">11:10 - 12:00</div>
                        <h3 class="text-lg font-bold mb-2">ä¸­å ´è½‰ç§»èˆ‡æ•´å‚™</h3>
                         <ul class="space-y-2 text-gray-700">
                            <li><span class="time-badge">11:10</span> æ±äº¬è»Šç«™å‡ºç™¼ã€‚</li>
                            <li><span class="time-badge">11:40</span> æŠµé”é£¯åº—ã€‚<br><span class="text-sm text-gray-500">å‹•ä½œï¼šæ”¾ä¼´æ‰‹ç¦®ã€ä¸Šå»æ‰€ã€è£œçµ¦éš¨èº«æ°´/é›¶é£Ÿã€‚</span></li>
                            <li><span class="time-badge">11:55</span> <strong>é£¯åº—å¤§å»³é›†åˆå®Œç•¢</strong>ã€‚</li>
                        </ul>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card bg-slate-800 text-white" id="t-0207-1200">
                        <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill-header text-slate-800 bg-white border-none" onclick="setAnchor('t-0207-1200')">12:00</div>
                        <h3 class="text-2xl font-bold mt-2 mb-4">ğŸš å¯Œå£«å±±èŠ±ç«å°ˆè»Šç™¼è»Š</h3>
                        <p class="text-slate-300 mb-4">Klook è¡Œç¨‹ï¼Œä¸­æ–‡å°éŠã€‚å°ˆè»Šæ¥é€ï¼Œè¼•é¬†æ”»ç•¥ã€‚</p>
                        <div class="bg-yellow-500/20 border border-yellow-500/50 p-3 rounded text-yellow-200 text-sm font-bold">
                            â„ï¸ å±±å€æ°£æº«æ¥µä½ï¼ˆå°¤å…¶æ™šä¸Šçœ‹ç…™ç«æ™‚ï¼‰ï¼Œè«‹å‹™å¿…æ”œå¸¶ä¿æš–è¡£ç‰©ï¼ˆæ‰‹å¥—ã€åœå·¾ã€æ¯›å¸½ï¼‰ã€‚
                        </div>
                    </div>
                </div>
                
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card" id="t-0207-tour">
                        <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill-header" onclick="setAnchor('t-0207-tour')">è¡Œç¨‹æ™¯é» (è©³ç´°æ™‚é–“)</div>
                        <div class="space-y-8 mt-4">
                            <div>
                                <strong class="text-lg text-blue-800 block mb-1">1. æ–°å€‰å±±æ·ºé–“å…¬åœ’ <span class="time-badge ml-2 bg-blue-100">14:30 - 15:40</span></strong>
                                <p class="text-gray-600 mb-2">çœ‹é»ï¼šç¶“å…¸çš„ã€Œäº”é‡å¡”ï¼‹å¯Œå£«å±±ã€æ˜ä¿¡ç‰‡å ´æ™¯ã€‚<br><span class="text-sm bg-gray-100 px-2 rounded">âš ï¸ æ³¨æ„ï¼šéœ€è¦çˆ¬ 398 éšæ¨“æ¢¯ã€‚</span></p>
                                <a href="https://www.google.com/maps/search/?api=1&query=æ–°å€‰å±±æ·ºé–“å…¬åœ’" target="_blank" class="map-btn py-1 px-3 text-xs inline-flex">Google Maps</a>
                            </div>
                            <div>
                                <strong class="text-lg text-blue-800 block mb-1">2. æ—¥å·æ™‚è¨ˆåº— <span class="time-badge ml-2 bg-blue-100">15:50 - 16:10</span></strong>
                                <p class="text-gray-600 mb-2">çœ‹é»ï¼šä¸‹å‰ç”°è‘—åçš„ã€Œæ˜­å’Œé¢¨è¡—é“ï¼‹å·¨å¤§å¯Œå£«å±±ã€è¡—æ‹ç†±é»ã€‚<br><span class="text-sm bg-gray-100 px-2 rounded">âš ï¸ æ³¨æ„ï¼šä½æ–¼é¦¬è·¯é‚Šï¼Œè«‹å‹™å¿…æ³¨æ„ä¾†è»Šå®‰å…¨ã€‚</span></p>
                                <a href="https://www.google.com/maps/search/?api=1&query=æ—¥å·æ™‚è¨ˆåº—" target="_blank" class="map-btn py-1 px-3 text-xs inline-flex">Google Maps</a>
                            </div>
                            <div>
                                <strong class="text-lg text-blue-800 block mb-1">3. ç¾…æ£® (Lawson) <span class="time-badge ml-2 bg-blue-100">16:20 - 16:40</span></strong>
                                <p class="text-gray-600 mb-2">çœ‹é»ï¼šç¶²ç´…æ‰“å¡é»ï¼Œè—ç™½æ‹›ç‰Œé…ä¸ŠèƒŒæ™¯å¯Œå£«å±±ã€‚</p>
                                <a href="https://maps.app.goo.gl/X1vLNQTi2GihRJBD7" target="_blank" class="map-btn py-1 px-3 text-xs inline-flex">Google Maps</a>
                            </div>
                            <div>
                                <strong class="text-lg text-blue-800 block mb-1">4. å¿é‡å…«æµ· <span class="time-badge ml-2 bg-blue-100">17:10 - 18:30</span></strong>
                                <p class="text-gray-600 mb-2">çœ‹é»ï¼šå¯Œå£«å±±é›ªæ°´èåŒ–å½¢æˆçš„æ¸…æ¾ˆæ± æ°´ï¼ˆå¤©ç„¶ç´€å¿µç‰©ï¼‰ã€‚<br>ç¾é£Ÿï¼šæ¨è–¦å“åšè‰é¤…ã€è±†è…ã€çƒ¤é­šã€‚</p>
                                <a href="https://www.google.com/maps/search/?api=1&query=å¿é‡å…«æµ·" target="_blank" class="map-btn py-1 px-3 text-xs inline-flex">Google Maps</a>
                            </div>
                             <div>
                                <strong class="text-lg text-blue-800 block mb-1">5. æ²³å£æ¹–å¤§çŸ³å…¬åœ’ <span class="time-badge ml-2 bg-blue-100">19:20 - 20:00</span></strong>
                                <p class="text-gray-600 mb-2">æ´»å‹•ï¼šæ²³å£æ¹–ç•”è‡ªç”±æ´»å‹•ï¼Œç­‰å¾…èŠ±ç«ã€‚<br><span class="text-sm font-bold text-blue-600">âš ï¸ æ³¨æ„ï¼šæ­¤æ™‚å¤©è‰²å·²é»‘ä¸”æ°£æº«å¾ˆä½ï¼Œè«‹åœ¨æ­¤éšæ®µå°‡ä¿æš–è£å‚™å…¨æ•¸ç©¿ä¸Šã€‚</span></p>
                                <a href="https://www.google.com/maps/search/?api=1&query=æ²³å£æ¹–å¤§çŸ³å…¬åœ’" target="_blank" class="map-btn py-1 px-3 text-xs inline-flex">Google Maps</a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card border-2 border-purple-200" id="t-0207-2000">
                        <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill-header" onclick="setAnchor('t-0207-2000')">20:00 - 20:20</div>
                        <h3 class="text-2xl font-bold text-purple-700 mb-3">ğŸ† æ²³å£æ¹–å†¬èŠ±ç«</h3>
                        <p class="text-gray-700 text-lg mb-2"><strong>è§€è³é»ï¼š</strong> æ²³å£æ¹–å¤§æ± å…¬åœ’å‘¨é‚Š</p>
                        <p class="text-gray-600 mb-4">ç‰¹è‰²ï¼šå†¬å­£å¤œç©ºæ¸…æ¾ˆï¼ŒèŠ±ç«åœ¨å¯Œå£«å±±è…³ä¸‹ç¶»æ”¾ï¼Œå€’æ˜ åœ¨æ¹–é¢ä¸Šã€‚</p>
                        <a href="https://www.google.com/maps/search/?api=1&query=æ²³å£æ¹–å¤§æ± å…¬åœ’" target="_blank" class="map-btn bg-purple-50 text-purple-800 border-purple-200 hover:bg-purple-100"><i class="fa-solid fa-fire"></i> å¤§æ± å…¬åœ’åœ°åœ–</a>
                    </div>
                </div>

                 <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card" id="t-0207-2225">
                         <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill-header" onclick="setAnchor('t-0207-2225')">22:25</div>
                        <h3 class="text-xl font-bold">æŠµé”é£¯åº—</h3>
                        <p class="text-gray-500 mt-2">çµæŸéµè…¿çš„ä¸€å¤©ã€‚</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="feb8" class="tab-content hidden">
            <div class="section-header">
                <h2 class="text-xl font-bold">ğŸ“… 2/8 (æ—¥) è¿”ç¨‹æ—¥</h2>
                <p class="text-sm opacity-80 mt-1">éŠ€åº§æœ€å¾Œè¡åˆº & å…¨å“¡æ©Ÿå ´é›†åˆ</p>
            </div>

            <div class="timeline-container">
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card" id="t-0208-0955">
                        <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill-header" onclick="setAnchor('t-0208-0955')">09:55</div>
                        <h3 class="text-xl font-bold mt-2">Check-out (é£¯åº—é€€æˆ¿)</h3>
                        <p class="text-gray-700 mt-2">å‹•ä½œï¼šå…¨å“¡é›†åˆæ–¼ 1 æ¨“ï¼Œå°‡è¡Œæçµ±ä¸€å¯„æ”¾åœ¨æ«ƒå°ã€‚éš¨èº«è¼•è£å‡ºç™¼ã€‚</p>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card" id="t-0208-1030">
                        <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill-header" onclick="setAnchor('t-0208-1030')">10:30 - 12:30</div>
                        <h3 class="text-xl font-bold mt-2 mb-4">åœ˜é«”æ±ºç­– (äºŒé¸ä¸€)</h3>
                        <div class="text-sm bg-yellow-50 text-yellow-800 p-3 rounded-lg mb-6 border border-yellow-100">
                            <strong>âš ï¸ æ±ºç­–ï¼š</strong> è«‹å…¨é«”æˆå“¡äº‹å…ˆè¨è«–ï¼Œæ±ºå®šå»ã€Œæ±‚è²¡ã€é‚„æ˜¯ã€Œè³¼ç‰©ã€ï¼Œå…¨åœ˜çµ±ä¸€è¡Œå°ã€‚
                        </div>

                        <button class="route-btn" onclick="openRouteModal('modal-morning-decision')">
                             <i class="fa-solid fa-scale-balanced"></i> ğŸ“– æŸ¥çœ‹ã€Œå°ç¶²ç¥ç¤¾ã€vsã€ŒUniqloæ——è‰¦åº—ã€è©³æƒ…
                        </button>

                        <div id="modal-morning-decision" class="hidden">
                             <h3 class="text-2xl font-bold mb-6">åœ˜é«”æ±ºç­–ï¼šäºŒé¸ä¸€</h3>
                             
                             <div class="mb-6 bg-yellow-50 p-4 rounded-xl border border-yellow-200">
                                <h4 class="font-bold text-yellow-800 text-lg mb-2">ã€é¸é … Aï¼šæ±‚è²¡æ”¹é‹ã€‘å°ç¶²ç¥ç¤¾</h4>
                                <p class="text-sm text-gray-700 mb-2"><strong>ç‰¹è‰²ï¼š</strong> æ±äº¬æœ€å¼·æ±‚è²¡ç¥ç¤¾ï¼Œé›–ç„¶å¾ˆå°ä½†é¦™ç«æ¥µæ—ºã€‚</p>
                                <p class="text-sm text-gray-700 mb-3"><strong>å¿…åšï¼š</strong> è¨˜å¾—å¸¶é›¶éŒ¢æˆ–ç´™éˆ”ï¼Œåœ¨ã€Œæ´—éŒ¢äº•ã€æ¸…æ´—ï¼Œæ”¾å…¥éŒ¢åŒ…ç•¶éŒ¢æ¯ã€‚</p>
                                <a href="https://www.google.com/maps/search/?api=1&query=å°ç¶²ç¥ç¤¾" target="_blank" class="map-btn bg-white w-auto inline-flex text-xs py-2">Google Maps</a>
                            </div>

                            <div class="bg-pink-50 p-4 rounded-xl border border-pink-200">
                                <h4 class="font-bold text-pink-800 text-lg mb-2">ã€é¸é … Bï¼šæ™‚å°šæ¡è³¼ã€‘éŠ€åº§ Uniqlo / GU æ——è‰¦åº—</h4>
                                <p class="text-sm text-gray-700 mb-3"><strong>ç‰¹è‰²ï¼š</strong> å…¨çƒæœ€å¤§æ——è‰¦åº—ä¹‹ä¸€ï¼Œå…±æœ‰ 12 å±¤æ¨“ï¼Œæ¬¾å¼æœ€é½Šå…¨ã€‚</p>
                                <a href="https://www.google.com/maps/search/?api=1&query=UNIQLOéŠ€åº§åº—" target="_blank" class="map-btn bg-white w-auto inline-flex text-xs py-2">Google Maps</a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card" id="t-0208-1230">
                         <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill-header" onclick="setAnchor('t-0208-1230')">12:30 - 14:50</div>
                        <h3 class="text-xl font-bold mt-2 mb-4">ğŸ¥© éŠ€åº§åˆé¤ï¼šç‡’è‚‰å¤§æ±ºæˆ°</h3>
                        <p class="text-sm text-gray-600 mb-6 bg-gray-50 p-3 rounded">å…©å®¶çš†éœ€æå‰é è¨‚ï¼Œè«‹å¤§å®¶æŠ•ç¥¨æ±ºå®šè¦åƒã€Œç²¾ç·»å¥—é¤ã€é‚„æ˜¯ã€Œåƒåˆ°é£½ã€ã€‚</p>
                        
                        <button class="route-btn" onclick="openRouteModal('modal-bbq-details')">
                            <i class="fa-solid fa-utensils"></i> ğŸ“– æŸ¥çœ‹ A/B æ–¹æ¡ˆè©³ç´°èœå–®èˆ‡é ç®—
                        </button>

                         <div id="modal-bbq-details" class="hidden">
                             <h3 class="text-xl font-bold mb-4">ç‡’è‚‰å¤§æ±ºæˆ°ï¼šè©³ç´°è©•æ¯”</h3>
                             
                             <div class="mb-6 p-4 border border-gray-200 rounded-lg">
                                <h4 class="text-lg font-bold text-blue-800 mb-2">ğŸ…°ï¸ æ–¹æ¡ˆä¸€ï¼šç²¾ç·»åŒ…å»‚æ´¾ (ã†ã—ãŠ GINZA)</h4>
                                <ul class="list-disc pl-5 space-y-2 text-gray-700 text-sm">
                                    <li><strong>é ç®—ï¼š</strong> JPY 7,900 /äºº</li>
                                    <li><strong>å…§å®¹ï¼š</strong> ã€é›…ï½Miyabiï½å¥—é¤ã€‘(å…± 12 é“)</li>
                                    <li>å“åšæœ¬åº—è‡ªè±ªçš„éœœé™ç‰›èˆŒåŠç²¾é¸æ–™ç†ã€‚</li>
                                    <li>å±¬æ–¼ã€Œåƒå·§ã€åƒæ°£æ°›ã€åƒè‚‰è³ªã€çš„è·¯ç·šã€‚</li>
                                    <li><strong>å„ªé»ï¼š</strong> å…¨åŒ…å»‚ (å€‹å®¤)ï¼Œ9 äººå¯ä»¥åœ¨åŒä¸€ç§å¯†ç©ºé–“èŠå¤©ï¼Œç’°å¢ƒå„ªé›…ã€‚</li>
                                </ul>
                                <div class="flex gap-2 mt-3">
                                    <a href="https://tabelog.com/tw/tokyo/A1301/A130101/13309015/party/281626868/" target="_blank" class="text-xs bg-gray-100 border px-2 py-1 rounded">Tabelog è©³æƒ…</a>
                                    <a href="https://www.google.com/maps/search/?api=1&query=å’Œç‰›+å€‹å®¤ç„¼è‚‰+ã†ã—ãŠ+GINZA" target="_blank" class="text-xs bg-gray-100 border px-2 py-1 rounded">Google Maps</a>
                                </div>
                             </div>

                             <div class="p-4 border border-gray-200 rounded-lg bg-orange-50">
                                <h4 class="text-lg font-bold text-orange-800 mb-2">ğŸ…±ï¸ æ–¹æ¡ˆäºŒï¼šè±ªé‚åƒåˆ°é£½æ´¾ (å¾³ éŠ€åº§å…«ä¸ç›®åº—)</h4>
                                <ul class="list-disc pl-5 space-y-2 text-gray-700 text-sm">
                                    <li><strong>é ç®—ï¼š</strong> JPY 6,380 /äºº</li>
                                    <li><strong>å…§å®¹ï¼š</strong> ã€æ¨™æº–åƒåˆ°é£½ Courseã€‘(é™æ™‚ 90 åˆ†é˜)</li>
                                    <li>æä¾› A5é»‘æ¯›å’Œç‰›ã€ç‰›èˆŒã€æ©«è†ˆè†œç­‰éƒ¨ä½ç„¡é™çºŒé»ï¼ˆåƒ…é™é¤é»ï¼Œé£²æ–™å¦è¨ˆï¼‰ã€‚</li>
                                    <li>å±¬æ–¼ã€Œå¤§å£åƒè‚‰ã€è¿½æ±‚ CP å€¼ã€çš„è·¯ç·šã€‚</li>
                                    <li><strong>å„ªé»ï¼š</strong> ä¸æ€•åƒä¸é£½ï¼Œé©åˆé£Ÿé‡å¤§çš„åœ˜å“¡ã€‚</li>
                                </ul>
                                <div class="flex gap-2 mt-3">
                                    <a href="https://tabelog.com/tw/tokyo/A1301/A130101/13214596/party/41645876/" target="_blank" class="text-xs bg-gray-100 border px-2 py-1 rounded">Tabelog è©³æƒ…</a>
                                    <a href="https://maps.app.goo.gl/C1JJcaLSiqMRsUQP8" target="_blank" class="text-xs bg-gray-100 border px-2 py-1 rounded">Google Maps</a>
                                </div>
                             </div>
                         </div>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="card border-2 border-red-500 bg-red-50" id="t-0208-1500">
                         <div class="current-badge">ğŸ“ ç›®å‰é€²åº¦</div>
                        <div class="time-pill-header text-red-700 bg-white border-red-200" onclick="setAnchor('t-0208-1500')">15:00 - 17:03</div>
                        <h3 class="text-2xl font-bold text-red-700 mt-2 mb-4">ğŸš¨ å…¨å“¡å‰å¾€æ©Ÿå ´</h3>
                        <p class="font-bold text-red-600 mb-6 text-lg border-b border-red-200 pb-2">é€™æ˜¯çµ•å°ä¸èƒ½é²åˆ°çš„æ®µè½ï¼Œè«‹è¨­å¥½é¬§é˜ï¼</p>
                        <ul class="space-y-4 text-gray-800 text-lg font-medium">
                            <li><span class="time-badge bg-white">15:00</span> çµæŸåˆé¤ï¼Œå…¨å“¡æ­è»Šè¿”å›é£¯åº— (æ·ºè‰æ©‹)ã€‚</li>
                            <li><span class="time-badge bg-white">15:30</span> æŠµé”é£¯åº—ï¼Œ<strong>é ˜å–å¯„æ”¾çš„è¡Œæ</strong>ã€‚</li>
                            <li><span class="time-badge bg-white">15:40</span> æ‹–è¡Œæå‡ºç™¼å‰å¾€ä¸Šé‡è»Šç«™ã€‚</li>
                            <li><span class="time-badge bg-white">16:00</span> æŠµé” <strong>ä¸Šé‡ç«™ (Keisei Ueno)</strong> <a href="https://maps.app.goo.gl/MHEPz9QxRcgh9RGV7" target="_blank" class="inline-block text-blue-600"><i class="fa-solid fa-map-pin"></i></a>ã€‚<br><span class="text-sm font-normal text-gray-600">å‹•ä½œï¼šç¢ºèª Skyliner è»Šç¥¨èˆ‡æœˆå°ï¼Œé›†é«”é€²ç«™ã€‚</span></li>
                            <li><span class="time-badge bg-white">16:20</span> ğŸš… <strong>æ­ä¹˜ Skyliner</strong> (å¾€æˆç”°æ©Ÿå ´)ã€‚</li>
                            <li><span class="time-badge bg-white">17:03</span> âœˆï¸ <strong>æŠµé” æˆç”°æ©Ÿå ´ ç¬¬äºŒèˆªå»ˆ</strong>ã€‚</li>
                        </ul>
                        <div class="mt-6 pt-4 border-t border-red-200 text-base text-red-800 bg-white p-4 rounded-xl shadow-sm">
                             <strong>ğŸ‘‹ è§£æ•£èˆ‡æ¥æ©Ÿï¼š</strong><br>
                             è¾¦ç†å ±åˆ°ã€æ‰˜é‹å¾Œè§£æ•£ã€‚<br>å›å°ç£å¾Œæ¥æ©Ÿï¼Œè«‹å„ä½äº‹å…ˆè‡ªè¡Œå®‰æ’ã€‚
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <div id="infoModal" class="modal-overlay" onclick="closeModal(event)">
        <div class="modal-content" onclick="event.stopPropagation()">
            <button onclick="closeModal()" class="absolute top-4 right-4 text-gray-400 hover:text-gray-800 text-xl w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100 transition"><i class="fa-solid fa-xmark"></i></button>
            <div id="modalBody"></div>
        </div>
    </div>

    <div id="lightbox" class="lightbox" onclick="closeLightbox()">
        <div class="lightbox-container" onmousedown="startDrag(event)" ontouchstart="startDrag(event)" onmousemove="drag(event)" ontouchmove="drag(event)" onmouseup="endDrag()" ontouchend="endDrag()" onmouseleave="endDrag()">
             <img id="lightboxImg" src="" alt="Full size" onclick="toggleZoom(event)">
        </div>
        <p class="text-white mt-4 text-sm bg-black/50 px-3 py-1 rounded absolute bottom-8">é»æ“Šæ”¾å¤§/ç¸®å° â€¢ æ‹–æ›³ç§»å‹• â€¢ é»æ“ŠèƒŒæ™¯é—œé–‰</p>
    </div>

    <div id="toast" class="toast">
        <i class="fa-solid fa-link mr-2"></i> å·²è¤‡è£½é€²åº¦é€£çµï¼
    </div>

    <script>
        // --- æ ¸å¿ƒé‚è¼¯å€ ---
        
        let scrollTimeout;
        const SNAP_DELAY = 150; // 0.15s
        let isUserInteracting = false;
        let isTabSwitching = false;
        let isProgrammaticScroll = false;
        let scrollObserver; 

        const tabs = document.querySelectorAll('.nav-item');
        const contents = document.querySelectorAll('.tab-content');
        const tabOrder = ['prep', 'feb1-meeting', 'feb2', 'feb3', 'feb4', 'feb5', 'feb6', 'feb7', 'feb8'];

        // --- 1. è§¸æ§å¹²æ“¾åµæ¸¬ (é˜²æ­¢ç£å¸å¹²æ“¾é»æ“Š) ---
        // ä»»ä½•äº’å‹•éƒ½å…ˆæ¸…é™¤ç£å¸å€’æ•¸
        const clearSnap = () => clearTimeout(scrollTimeout);

        window.addEventListener('touchstart', () => { isUserInteracting = true; clearSnap(); }, {passive: true});
        window.addEventListener('touchmove', () => { isUserInteracting = true; clearSnap(); }, {passive: true});
        window.addEventListener('wheel', () => { isUserInteracting = true; clearSnap(); setTimeout(() => isUserInteracting = false, 200); }, {passive: true});
        window.addEventListener('touchend', () => { setTimeout(() => isUserInteracting = false, 50); }, {passive: true});

        // --- 2. æ™ºæ…§æ»¾å‹•ç›£è½ ---
        window.addEventListener('scroll', () => {
             // åƒ…è¦–è¦ºæ›´æ–°ï¼Œä¸åšä½ç½®è®Šå‹•
             if (!isTabSwitching) {
                 updateScrollSpy();
             }

             // è‹¥æ­£åœ¨åˆ‡æ›é ç±¤æˆ–ç¨‹å¼æ»¾å‹•ä¸­ï¼Œä¸åŸ·è¡Œç£å¸
             if (isUserInteracting || isProgrammaticScroll || isTabSwitching) return;

             // é€™è£¡ä¿ç•™å»¶é²ç£å¸é‚è¼¯ï¼Œä½†å·²ç§»é™¤ CSS snapï¼Œæ‰€ä»¥æ˜¯ç´” JS ç·©å‹•
             clearTimeout(scrollTimeout);
             scrollTimeout = setTimeout(snapToNearestCard, SNAP_DELAY);
        });

        function updateScrollSpy() {
            const cards = document.querySelectorAll('.tab-content:not(.hidden) .card, .tab-content:not(.hidden) .snap-point');
            let activeCard = null;
            const center = window.innerHeight / 2;

            for (const card of cards) {
                const rect = card.getBoundingClientRect();
                if (rect.top <= center && rect.bottom >= center) {
                    activeCard = card;
                    break;
                }
            }

            if (activeCard && activeCard.id) {
                 document.querySelectorAll('.active-highlight').forEach(el => el.classList.remove('active-highlight'));
                 activeCard.classList.add('active-highlight');
                 history.replaceState(null, null, '#' + activeCard.id);
            }
        }

        function snapToNearestCard() {
            // å·²åœç”¨å¼·åˆ¶ç£å¸ï¼Œåƒ…ä¿ç•™ä½œç‚ºæœªä¾†æ“´å……ä»‹é¢ï¼Œä¿æŒåŸç”Ÿæ»¾å‹•é«”é©—
            // è‹¥è¦å•Ÿç”¨ JS ç£å¸å¯åœ¨æ­¤å¯¦ä½œï¼Œä½†ç›®å‰ä¿æŒç©ºç™½ä»¥ç¢ºä¿åŸç”Ÿé«”é©—
        }

        // --- 3. é ç±¤åˆ‡æ› (ä¿®å¾© iOS å‹•ç•«é–ƒçˆ) ---
        function switchTab(tabId) {
            const currentTab = document.querySelector('.nav-item.active');
            let prevIndex = -1;
            if(currentTab) {
                prevIndex = tabOrder.indexOf(currentTab.dataset.tab);
            }
            const newIndex = tabOrder.indexOf(tabId);

            contents.forEach(content => {
                content.classList.add('hidden');
                content.classList.remove('anim-left', 'anim-right');
                content.style.opacity = '0'; // é—œéµï¼šå…ˆéš±è—é˜²æ­¢é–ƒçˆ
            });

            const activeContent = document.getElementById(tabId);
            if (activeContent) {
                activeContent.classList.remove('hidden');
                
                // é—œéµ iOS Fix: ç¢ºä¿ DOM æ›´æ–°å¾Œå†åŠ å‹•ç•« class
                requestAnimationFrame(() => {
                    requestAnimationFrame(() => {
                        activeContent.style.opacity = ''; // æ¢å¾©é€æ˜åº¦æ§åˆ¶æ¬Šçµ¦å‹•ç•«
                        if(prevIndex !== -1 && newIndex > prevIndex) {
                            activeContent.classList.add('anim-right');
                        } else if (prevIndex !== -1 && newIndex < prevIndex) {
                            activeContent.classList.add('anim-left');
                        } else {
                            activeContent.classList.add('anim-right');
                        }
                    });
                });
            }

            tabs.forEach(tab => {
                if (tab.dataset.tab === tabId) {
                    tab.classList.add('active');
                    tab.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
                } else {
                    tab.classList.remove('active');
                }
            });
            localStorage.setItem('japanTripActiveTab', tabId);
        }

        tabs.forEach(tab => tab.addEventListener('click', () => {
             // 1. æ®ºæ­»æ‰€æœ‰ç£å¸ä»»å‹™
             clearTimeout(scrollTimeout);
             
             isTabSwitching = true;
             isProgrammaticScroll = true;
             
             history.pushState(null, null, ' ');
             document.querySelectorAll('.active-highlight').forEach(el => el.classList.remove('active-highlight'));

             switchTab(tab.dataset.tab);
             window.scrollTo({ top: 0, behavior: 'smooth' });
             
             // å»¶é•·ä¿è­·æœŸï¼Œç¢ºä¿å‹•ç•«å®Œæˆå‰ä¸æœƒè¢«è¦–ç‚ºæ‰‹å‹•æ»¾å‹•
             setTimeout(() => {
                isTabSwitching = false;
                isProgrammaticScroll = false;
             }, 800);
        }));

        // --- 4. éŒ¨é»è·³è½‰ ---
        function setAnchor(id) {
            clearTimeout(scrollTimeout);
            isProgrammaticScroll = true;
            history.pushState(null, null, '#' + id);
            
            highlightCard(id);
            const url = window.location.href;
            navigator.clipboard.writeText(url).then(() => {
                showToast();
            });

            setTimeout(() => {
                isProgrammaticScroll = false;
            }, 800);
        }

        function highlightCard(id) {
            document.querySelectorAll('.active-highlight').forEach(el => el.classList.remove('active-highlight'));
            const target = document.getElementById(id);
            if (target) {
                target.classList.add('active-highlight');
                const headerOffset = 150; 
                const elementPosition = target.getBoundingClientRect().top;
                const offsetPosition = elementPosition + window.pageYOffset - headerOffset;
                
                window.scrollTo({
                    top: offsetPosition,
                    behavior: "smooth"
                });
            }
        }

        function showToast() {
            const toast = document.getElementById('toast');
            toast.style.display = 'block';
            setTimeout(() => { toast.style.display = 'none'; }, 2000);
        }

        // --- 5. Lightbox Logic ---
        let scale = 1;
        let pointX = 0;
        let pointY = 0;
        let startX = 0;
        let startY = 0;
        let isDragging = false;
        const img = document.getElementById('lightboxImg');

        function toggleZoom(e) {
            e.stopPropagation();
            if (scale === 1) {
                scale = 2.5;
                img.classList.add('zoomed');
            } else {
                scale = 1;
                pointX = 0;
                pointY = 0;
                img.classList.remove('zoomed');
            }
            updateTransform();
        }

        function startDrag(e) {
            if (scale === 1) return;
            isDragging = true;
            startX = e.type.includes('mouse') ? e.clientX : e.touches[0].clientX;
            startY = e.type.includes('mouse') ? e.clientY : e.touches[0].clientY;
        }

        function drag(e) {
            if (!isDragging || scale === 1) return;
            e.preventDefault();
            const currentX = e.type.includes('mouse') ? e.clientX : e.touches[0].clientX;
            const currentY = e.type.includes('mouse') ? e.clientY : e.touches[0].clientY;
            const diffX = currentX - startX;
            const diffY = currentY - startY;
            pointX += diffX;
            pointY += diffY;
            startX = currentX;
            startY = currentY;
            updateTransform();
        }

        function endDrag() {
            isDragging = false;
        }

        function updateTransform() {
            img.style.transform = `scale(${scale}) translate(${pointX / scale}px, ${pointY / scale}px)`;
        }

        // --- 6. Modals & Checkboxes ---
        function openRouteModal(contentId) {
            const content = document.getElementById(contentId).innerHTML;
            const modalBody = document.getElementById('modalBody');
            modalBody.innerHTML = content;
            document.getElementById('infoModal').style.display = 'flex';
            attachLightboxListeners(); 
        }

        function closeModal(event) {
            if (!event || event.target.id === 'infoModal' || !event.target) {
                document.getElementById('infoModal').style.display = 'none';
            }
        }

        function attachLightboxListeners() {
            const images = document.querySelectorAll('img');
            images.forEach(image => {
                if (image.id === 'lightboxImg') return; 
                image.onclick = function() {
                    if(this.width < 50) return; 
                    const lightboxImg = document.getElementById('lightboxImg');
                    lightboxImg.src = this.src;
                    scale = 1; pointX = 0; pointY = 0;
                    updateTransform();
                    document.getElementById('lightbox').style.display = 'flex';
                }
            });
        }

        function closeLightbox() {
            document.getElementById('lightbox').style.display = 'none';
        }

        function initCheckboxes() {
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            checkboxes.forEach((cb, index) => {
                const storageKey = 'japanTrip_cb_' + index;
                if (localStorage.getItem(storageKey) === 'true') {
                    cb.checked = true;
                    toggleStrike(cb);
                }
                cb.addEventListener('change', () => {
                    localStorage.setItem(storageKey, cb.checked);
                    toggleStrike(cb);
                });
            });
        }

        function toggleStrike(checkbox) {
            const span = checkbox.nextElementSibling;
            if (checkbox.checked) span.classList.add('checked-text');
            else span.classList.remove('checked-text');
        }

        function resetChecks() {
            if(confirm('ç¢ºå®šè¦é‡ç½®æ‰€æœ‰å‹¾é¸é …ç›®å—ï¼Ÿ')) {
                const checkboxes = document.querySelectorAll('input[type="checkbox"]');
                checkboxes.forEach((cb, index) => {
                    cb.checked = false;
                    localStorage.removeItem('japanTrip_cb_' + index);
                    toggleStrike(cb);
                });
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            initCheckboxes();
            attachLightboxListeners();

            // Initialize Observer
            scrollObserver = new IntersectionObserver((entries) => {
                if (isTabSwitching) return;
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const id = entry.target.id;
                        history.replaceState(null, null, '#' + id);
                        document.querySelectorAll('.active-highlight').forEach(el => el.classList.remove('active-highlight'));
                        entry.target.classList.add('active-highlight');
                    }
                });
            }, {
                root: null,
                rootMargin: '-45% 0px -45% 0px', 
                threshold: 0
            });

            document.querySelectorAll('.card, .snap-point').forEach(section => {
                scrollObserver.observe(section);
            });

            const hash = window.location.hash.substring(1); 
            if (hash) {
                const targetEl = document.getElementById(hash);
                if (targetEl) {
                    const tabSection = targetEl.closest('.tab-content');
                    if (tabSection) {
                        switchTab(tabSection.id);
                        setTimeout(() => highlightCard(hash), 300); 
                    }
                }
            } else {
                const savedTab = localStorage.getItem('japanTripActiveTab');
                switchTab(savedTab && document.getElementById(savedTab) ? savedTab : 'prep');
            }
        });
    </script>
</body>
</html>
